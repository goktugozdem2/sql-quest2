window.sqlChallenge30Days={tables:{passengers:{name:"passengers",description:"Titanic passenger manifest - 891 passengers",rowCount:891,schema:[{column:"PassengerId",type:"INTEGER",description:"Unique passenger ID (1-891)",example:"1, 2, 3..."},{column:"Survived",type:"INTEGER",description:"Survival status",example:"0 = Died, 1 = Survived"},{column:"Pclass",type:"INTEGER",description:"Ticket class",example:"1 = First, 2 = Second, 3 = Third"},{column:"Name",type:"TEXT",description:"Full name with title",example:"Braund, Mr. Owen Harris"},{column:"Sex",type:"TEXT",description:"Gender",example:"'male' or 'female'"},{column:"Age",type:"REAL",description:"Age in years (177 NULL)",example:"22, 38, 0.42 (infant)"},{column:"SibSp",type:"INTEGER",description:"# siblings/spouses aboard",example:"0, 1, 2..."},{column:"Parch",type:"INTEGER",description:"# parents/children aboard",example:"0, 1, 2..."},{column:"Ticket",type:"TEXT",description:"Ticket number",example:"A/5 21171"},{column:"Fare",type:"REAL",description:"Passenger fare in Â£",example:"7.25, 71.28, 512.33"},{column:"Cabin",type:"TEXT",description:"Cabin number (687 NULL)",example:"C85, B28, NULL"},{column:"Embarked",type:"TEXT",description:"Port of embarkation",example:"S=Southampton, C=Cherbourg, Q=Queenstown"}],sampleData:[{PassengerId:1,Survived:0,Pclass:3,Name:"Braund, Mr. Owen Harris",Sex:"male",Age:22,SibSp:1,Parch:0,Ticket:"A/5 21171",Fare:7.25,Cabin:null,Embarked:"S"},{PassengerId:2,Survived:1,Pclass:1,Name:"Cumings, Mrs. John Bradley",Sex:"female",Age:38,SibSp:1,Parch:0,Ticket:"PC 17599",Fare:71.28,Cabin:"C85",Embarked:"C"},{PassengerId:3,Survived:1,Pclass:3,Name:"Heikkinen, Miss. Laina",Sex:"female",Age:26,SibSp:0,Parch:0,Ticket:"STON/O2. 3101282",Fare:7.925,Cabin:null,Embarked:"S"},{PassengerId:4,Survived:1,Pclass:1,Name:"Futrelle, Mrs. Jacques Heath",Sex:"female",Age:35,SibSp:1,Parch:0,Ticket:"113803",Fare:53.1,Cabin:"C123",Embarked:"S"},{PassengerId:5,Survived:0,Pclass:3,Name:"Allen, Mr. William Henry",Sex:"male",Age:35,SibSp:0,Parch:0,Ticket:"373450",Fare:8.05,Cabin:null,Embarked:"S"}],stats:{totalPassengers:891,survived:342,died:549,maleCount:577,femaleCount:314,class1:216,class2:184,class3:491,avgAge:29.7,avgFare:32.2}},customers:{name:"customers",description:"E-commerce customer data",rowCount:30,schema:[{column:"id",type:"INTEGER",description:"Unique customer ID",example:"1, 2, 3..."},{column:"name",type:"TEXT",description:"Customer full name",example:"Alice Johnson"},{column:"email",type:"TEXT",description:"Email address",example:"alice@email.com"},{column:"city",type:"TEXT",description:"City",example:"New York, Boston"},{column:"country",type:"TEXT",description:"Country",example:"USA, UK, Canada"},{column:"join_date",type:"TEXT",description:"Account created date",example:"2024-01-15"}],sampleData:[{id:1,name:"Alice Johnson",email:"alice@email.com",city:"New York",country:"USA",join_date:"2024-01-15"},{id:2,name:"Bob Smith",email:"bob@email.com",city:"Boston",country:"USA",join_date:"2024-01-20"},{id:3,name:"Carol Williams",email:"carol@email.com",city:"London",country:"UK",join_date:"2024-02-01"}]},orders:{name:"orders",description:"Customer orders",rowCount:50,schema:[{column:"id",type:"INTEGER",description:"Unique order ID",example:"1, 2, 3..."},{column:"customer_id",type:"INTEGER",description:"References customers.id",example:"1, 2, 3..."},{column:"order_date",type:"TEXT",description:"Date of order",example:"2024-01-15"},{column:"total",type:"REAL",description:"Order total amount",example:"150.00, 89.99"},{column:"status",type:"TEXT",description:"Order status",example:"pending, shipped, delivered"}],sampleData:[{id:1,customer_id:1,order_date:"2024-01-15",total:150,status:"delivered"},{id:2,customer_id:1,order_date:"2024-02-01",total:89.99,status:"delivered"},{id:3,customer_id:2,order_date:"2024-01-25",total:225.5,status:"shipped"}]}},scoring:{easy:{points:5,hintPenalty:2},"easy-medium":{points:10,hintPenalty:3},medium:{points:15,hintPenalty:5},"medium-hard":{points:20,hintPenalty:6},hard:{points:25,hintPenalty:8}},passRequirement:3,perfectBonus:10,maxDailyXP:85,days:[{day:1,week:1,title:"Introduction to SQL",description:"Learn SELECT basics - retrieving data from tables",concepts:["SELECT","FROM","*","Column selection"],tableUsed:"passengers",tableSchema:[{column:"PassengerId",type:"INTEGER",description:"Unique ID (1-891)"},{column:"Survived",type:"INTEGER",description:"0=Died, 1=Survived"},{column:"Pclass",type:"INTEGER",description:"1=First, 2=Second, 3=Third"},{column:"Name",type:"TEXT",description:"Full name with title"},{column:"Sex",type:"TEXT",description:"'male' or 'female'"},{column:"Age",type:"REAL",description:"Age in years"},{column:"SibSp",type:"INTEGER",description:"Siblings/spouses aboard"},{column:"Parch",type:"INTEGER",description:"Parents/children aboard"},{column:"Ticket",type:"TEXT",description:"Ticket number"},{column:"Fare",type:"REAL",description:"Ticket price (Â£)"},{column:"Cabin",type:"TEXT",description:"Cabin number"},{column:"Embarked",type:"TEXT",description:"S/C/Q port code"}],lesson:'# Welcome to SQL! ðŸŽ‰\n\n**SQL** (Structured Query Language) is the standard language for working with databases.\n\n## The SELECT Statement\n\nThe most fundamental SQL query retrieves data from a table:\n\n```sql\nSELECT * FROM passengers;\n```\n\n- **SELECT** - specifies what columns to retrieve\n- **\\*** - wildcard meaning "all columns"  \n- **FROM** - specifies which table\n- **passengers** - the table name\n\n## Selecting Specific Columns\n\nInstead of all columns, you can list the ones you want:\n\n```sql\nSELECT Name, Age FROM passengers;\n```\n\nThis returns only the Name and Age columns.',questions:[{id:"d1q1",difficulty:"easy",points:5,hintPenalty:2,title:"Your First Query",description:"Write a query to select **all columns** from the **passengers** table.",tableUsed:"passengers",columnsNeeded:["*"],hint:"Use SELECT * to get all columns. The syntax is: SELECT * FROM table_name;",solution:"SELECT * FROM passengers;",alternativeSolutions:["SELECT * FROM passengers","select * from passengers;","select * from passengers"],expectedResult:{columns:["PassengerId","Survived","Pclass","Name","Sex","Age","SibSp","Parch","Ticket","Fare","Cabin","Embarked"],rowCount:891,preview:[[1,0,3,"Braund, Mr. Owen Harris","male",22,1,0,"A/5 21171",7.25,null,"S"],[2,1,1,"Cumings, Mrs. John Bradley","female",38,1,0,"PC 17599",71.28,"C85","C"],[3,1,3,"Heikkinen, Miss. Laina","female",26,0,0,"STON/O2. 3101282",7.925,null,"S"],[4,1,1,"Futrelle, Mrs. Jacques Heath","female",35,1,0,"113803",53.1,"C123","S"],[5,0,3,"Allen, Mr. William Henry","male",35,0,0,"373450",8.05,null,"S"]],note:"Shows first 5 of 891 rows"},explanation:"SELECT * FROM table_name retrieves all columns and all rows from a table. The asterisk (*) is a wildcard that means 'everything'. This query returns all 891 passengers with all 12 columns."},{id:"d1q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Two Columns",description:"Select only the **Name** and **Age** columns from the passengers table.",tableUsed:"passengers",columnsNeeded:["Name","Age"],hint:"List column names separated by commas: SELECT col1, col2 FROM table;",solution:"SELECT Name, Age FROM passengers;",alternativeSolutions:["SELECT Name, Age FROM passengers","select name, age from passengers;"],expectedResult:{columns:["Name","Age"],rowCount:891,preview:[["Braund, Mr. Owen Harris",22],["Cumings, Mrs. John Bradley",38],["Heikkinen, Miss. Laina",26],["Futrelle, Mrs. Jacques Heath",35],["Allen, Mr. William Henry",35],["Moran, Mr. James",null],["McCarthy, Mr. Timothy J",54],["Palsson, Master. Gosta Leonard",2],["Johnson, Mrs. Oscar W",27],["Nasser, Mrs. Nicholas",14]],note:"Shows first 10 of 891 rows. Note: some Ages are NULL (unknown)"},explanation:"By listing specific column names, you retrieve only those columns. This is more efficient than SELECT * when you don't need all data. The query returns 891 rows but only 2 columns."},{id:"d1q3",difficulty:"medium",points:15,hintPenalty:5,title:"Four Columns",description:"Select **PassengerId**, **Name**, **Sex**, and **Survived** from the passengers table.",tableUsed:"passengers",columnsNeeded:["PassengerId","Name","Sex","Survived"],hint:"List all four column names separated by commas. Watch the spelling - column names are case-sensitive in some databases!",solution:"SELECT PassengerId, Name, Sex, Survived FROM passengers;",alternativeSolutions:["SELECT PassengerId, Name, Sex, Survived FROM passengers"],expectedResult:{columns:["PassengerId","Name","Sex","Survived"],rowCount:891,preview:[[1,"Braund, Mr. Owen Harris","male",0],[2,"Cumings, Mrs. John Bradley","female",1],[3,"Heikkinen, Miss. Laina","female",1],[4,"Futrelle, Mrs. Jacques Heath","female",1],[5,"Allen, Mr. William Henry","male",0],[6,"Moran, Mr. James","male",0],[7,"McCarthy, Mr. Timothy J","male",0],[8,"Palsson, Master. Gosta Leonard","male",0],[9,"Johnson, Mrs. Oscar W","female",1],[10,"Nasser, Mrs. Nicholas","female",1]],note:"Shows first 10 of 891 rows. Survived: 0=Died, 1=Survived"},explanation:"You can select any number of columns by listing them. The order you specify is the order they appear in the results. This query shows passenger ID, name, gender, and survival status."},{id:"d1q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Column Order Matters",description:"Select **Survived**, **Pclass**, and **Name** columns (in that exact order) from passengers.",tableUsed:"passengers",columnsNeeded:["Survived","Pclass","Name"],hint:"The order in SELECT determines output order. Put Survived first, then Pclass, then Name.",solution:"SELECT Survived, Pclass, Name FROM passengers;",alternativeSolutions:["SELECT Survived, Pclass, Name FROM passengers"],validateColumnOrder:!0,expectedResult:{columns:["Survived","Pclass","Name"],rowCount:891,preview:[[0,3,"Braund, Mr. Owen Harris"],[1,1,"Cumings, Mrs. John Bradley"],[1,3,"Heikkinen, Miss. Laina"],[1,1,"Futrelle, Mrs. Jacques Heath"],[0,3,"Allen, Mr. William Henry"],[0,3,"Moran, Mr. James"],[0,1,"McCarthy, Mr. Timothy J"],[0,3,"Palsson, Master. Gosta Leonard"],[1,2,"Johnson, Mrs. Oscar W"],[1,2,"Nasser, Mrs. Nicholas"]],note:"Shows first 10 of 891 rows. Notice Survived comes before Pclass."},explanation:"Column order in SELECT = column order in output. This matters when generating reports or exporting data where a specific format is required."},{id:"d1q5",difficulty:"hard",points:25,hintPenalty:8,title:"Passenger Profile",description:"Create a passenger profile by selecting: **Name**, **Age**, **Sex**, **Pclass**, **Fare**, and **Embarked**.",tableUsed:"passengers",columnsNeeded:["Name","Age","Sex","Pclass","Fare","Embarked"],hint:"Six columns total. Double-check spelling: Pclass (not Class), Embarked (not Port or Embarkation).",solution:"SELECT Name, Age, Sex, Pclass, Fare, Embarked FROM passengers;",alternativeSolutions:["SELECT Name, Age, Sex, Pclass, Fare, Embarked FROM passengers"],expectedResult:{columns:["Name","Age","Sex","Pclass","Fare","Embarked"],rowCount:891,preview:[["Braund, Mr. Owen Harris",22,"male",3,7.25,"S"],["Cumings, Mrs. John Bradley",38,"female",1,71.28,"C"],["Heikkinen, Miss. Laina",26,"female",3,7.925,"S"],["Futrelle, Mrs. Jacques Heath",35,"female",1,53.1,"S"],["Allen, Mr. William Henry",35,"male",3,8.05,"S"],["Moran, Mr. James",null,"male",3,8.4583,"Q"],["McCarthy, Mr. Timothy J",54,"male",1,51.8625,"S"],["Palsson, Master. Gosta Leonard",2,"male",3,21.075,"S"],["Johnson, Mrs. Oscar W",27,"female",2,11.1333,"S"],["Nasser, Mrs. Nicholas",14,"female",2,30.0708,"C"]],note:"Shows first 10 of 891 rows. Embarked: S=Southampton, C=Cherbourg, Q=Queenstown"},explanation:"Selecting multiple specific columns creates a focused view of the data. This 'passenger profile' query gives you the most relevant information about each passenger without the technical fields like Ticket or Cabin."}]},{day:2,week:1,title:"Column Aliases & DISTINCT",description:"Rename columns with AS and find unique values with DISTINCT",concepts:["AS","Aliases","DISTINCT","Unique values"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Fare",type:"REAL",description:"Ticket price"},{column:"Embarked",type:"TEXT",description:"S, C, or Q"},{column:"Survived",type:"INTEGER",description:"0 or 1"}],lesson:'# Aliases and Unique Values ðŸ·ï¸\n\n## Column Aliases with AS\n\nMake column names more readable:\n\n```sql\nSELECT Name AS passenger_name FROM passengers;\n```\n\nThe output column will be labeled "passenger_name" instead of "Name".\n\n## DISTINCT - Remove Duplicates\n\nFind unique values only:\n\n```sql\nSELECT DISTINCT Pclass FROM passengers;\n```\n\nReturns: 1, 2, 3 (each class appears only once)\n\n## Combining Both\n\n```sql\nSELECT DISTINCT Embarked AS port FROM passengers;\n```',questions:[{id:"d2q1",difficulty:"easy",points:5,hintPenalty:2,title:"Simple Alias",description:"Select the **Name** column and display it as **passenger_name** using an alias.",tableUsed:"passengers",columnsNeeded:["Name"],hint:"Use AS to create an alias: SELECT column AS new_name FROM table;",solution:"SELECT Name AS passenger_name FROM passengers;",alternativeSolutions:["SELECT Name AS passenger_name FROM passengers","SELECT Name as passenger_name FROM passengers;","SELECT Name passenger_name FROM passengers;"],expectedResult:{columns:["passenger_name"],rowCount:891,preview:[["Braund, Mr. Owen Harris"],["Cumings, Mrs. John Bradley"],["Heikkinen, Miss. Laina"],["Futrelle, Mrs. Jacques Heath"],["Allen, Mr. William Henry"],["Moran, Mr. James"],["McCarthy, Mr. Timothy J"],["Palsson, Master. Gosta Leonard"],["Johnson, Mrs. Oscar W"],["Nasser, Mrs. Nicholas"]],note:"Column header shows 'passenger_name' instead of 'Name'"},explanation:"AS creates an alias - a temporary display name for a column. The actual data and table structure aren't changed, just how the column appears in your results."},{id:"d2q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Multiple Aliases",description:"Select **Name** as **passenger** and **Fare** as **ticket_price**.",tableUsed:"passengers",columnsNeeded:["Name","Fare"],hint:"Apply AS to each column: SELECT col1 AS alias1, col2 AS alias2 FROM table;",solution:"SELECT Name AS passenger, Fare AS ticket_price FROM passengers;",alternativeSolutions:["SELECT Name AS passenger, Fare AS ticket_price FROM passengers"],expectedResult:{columns:["passenger","ticket_price"],rowCount:891,preview:[["Braund, Mr. Owen Harris",7.25],["Cumings, Mrs. John Bradley",71.28],["Heikkinen, Miss. Laina",7.925],["Futrelle, Mrs. Jacques Heath",53.1],["Allen, Mr. William Henry",8.05],["Moran, Mr. James",8.4583],["McCarthy, Mr. Timothy J",51.8625],["Palsson, Master. Gosta Leonard",21.075],["Johnson, Mrs. Oscar W",11.1333],["Nasser, Mrs. Nicholas",30.0708]],note:"Both columns have user-friendly names"},explanation:"You can alias multiple columns in the same query. This makes reports more readable - 'ticket_price' is clearer than 'Fare' for non-technical users."},{id:"d2q3",difficulty:"medium",points:15,hintPenalty:5,title:"Unique Classes",description:"Find all **unique passenger classes** (Pclass). Each class should appear only once.",tableUsed:"passengers",columnsNeeded:["Pclass"],hint:"Use DISTINCT before the column name: SELECT DISTINCT column FROM table;",solution:"SELECT DISTINCT Pclass FROM passengers;",alternativeSolutions:["SELECT DISTINCT Pclass FROM passengers","SELECT DISTINCT(Pclass) FROM passengers;"],expectedResult:{columns:["Pclass"],rowCount:3,preview:[[3],[1],[2]],fullResult:!0,note:"Only 3 rows - one for each unique class"},explanation:"DISTINCT removes duplicate values. The Titanic had 3 passenger classes, so this returns exactly 3 rows regardless of how many passengers were in each class."},{id:"d2q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"DISTINCT with Alias",description:"Find all **unique embarkation ports** (Embarked) and display the column as **port**.",tableUsed:"passengers",columnsNeeded:["Embarked"],hint:"Combine DISTINCT and AS: SELECT DISTINCT column AS alias FROM table;",solution:"SELECT DISTINCT Embarked AS port FROM passengers;",alternativeSolutions:["SELECT DISTINCT Embarked AS port FROM passengers"],expectedResult:{columns:["port"],rowCount:4,preview:[["S"],["C"],["Q"],[null]],fullResult:!0,note:"S=Southampton, C=Cherbourg, Q=Queenstown, NULL=unknown"},explanation:"Three ports plus NULL (2 passengers with unknown port): Southampton (S), Cherbourg (C), and Queenstown (Q). NULL represents missing data."},{id:"d2q5",difficulty:"hard",points:25,hintPenalty:8,title:"Unique Combinations",description:"Find all **unique combinations** of **Pclass** and **Survived**. Display as **class** and **survived**.",tableUsed:"passengers",columnsNeeded:["Pclass","Survived"],hint:"DISTINCT works on multiple columns: SELECT DISTINCT col1, col2 FROM table. Add AS aliases to both columns.",solution:"SELECT DISTINCT Pclass AS class, Survived AS survived FROM passengers;",alternativeSolutions:["SELECT DISTINCT Pclass AS class, Survived AS survived FROM passengers"],expectedResult:{columns:["class","survived"],rowCount:6,preview:[[3,0],[1,1],[3,1],[1,0],[2,1],[2,0]],fullResult:!0,note:"6 combinations: 3 classes Ã— 2 survival states"},explanation:"DISTINCT on multiple columns finds unique combinations. 3 classes Ã— 2 outcomes (survived/died) = 6 possible combinations, and all 6 exist in the data."}]},{day:3,week:1,title:"Calculations & Expressions",description:"Perform math operations and create calculated columns",concepts:["Arithmetic operators","+","-","*","/","Calculated columns"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Fare",type:"REAL",description:"Ticket price (Â£)"},{column:"SibSp",type:"INTEGER",description:"Siblings/spouses aboard"},{column:"Parch",type:"INTEGER",description:"Parents/children aboard"}],lesson:"# Calculations in SQL ðŸ§®\n\n## Arithmetic in SELECT\n\n```sql\nSELECT Name, Fare, Fare * 100 AS fare_cents\nFROM passengers;\n```\n\n## Available Operators\n\n| Operator | Meaning | Example |\n|----------|---------|---------|\n| + | Addition | Age + 10 |\n| - | Subtraction | Fare - 5 |\n| * | Multiplication | Fare * 2 |\n| / | Division | Fare / 2 |\n\n## Family Size Example\n\n```sql\nSELECT Name, SibSp + Parch + 1 AS family_size\nFROM passengers;\n```\n\nThe +1 includes the passenger themselves.",questions:[{id:"d3q1",difficulty:"easy",points:5,hintPenalty:2,title:"Double the Fare",description:"Select **Name**, **Fare**, and calculate **Fare Ã— 2** as **double_fare**.",tableUsed:"passengers",columnsNeeded:["Name","Fare","Fare * 2"],hint:"You can do math in SELECT: SELECT Name, Fare, Fare * 2 AS double_fare FROM passengers;",solution:"SELECT Name, Fare, Fare * 2 AS double_fare FROM passengers;",alternativeSolutions:["SELECT Name, Fare, Fare * 2 AS double_fare FROM passengers"],expectedResult:{columns:["Name","Fare","double_fare"],rowCount:891,preview:[["Braund, Mr. Owen Harris",7.25,14.5],["Cumings, Mrs. John Bradley",71.28,142.56],["Heikkinen, Miss. Laina",7.925,15.85],["Futrelle, Mrs. Jacques Heath",53.1,106.2],["Allen, Mr. William Henry",8.05,16.1]],note:"double_fare is exactly 2Ã— the Fare value"},explanation:"SQL can perform arithmetic operations. The calculation creates a new column in your results without changing the actual table data."},{id:"d3q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Convert to Cents",description:"Select **Name** and **Fare**, plus convert fare to cents (multiply by 100) as **fare_cents**.",tableUsed:"passengers",columnsNeeded:["Name","Fare","Fare * 100"],hint:"Multiply Fare by 100 and give it an alias: Fare * 100 AS fare_cents",solution:"SELECT Name, Fare, Fare * 100 AS fare_cents FROM passengers;",alternativeSolutions:["SELECT Name, Fare, Fare * 100 AS fare_cents FROM passengers"],expectedResult:{columns:["Name","Fare","fare_cents"],rowCount:891,preview:[["Braund, Mr. Owen Harris",7.25,725],["Cumings, Mrs. John Bradley",71.28,7128],["Heikkinen, Miss. Laina",7.925,792.5],["Futrelle, Mrs. Jacques Heath",53.1,5310],["Allen, Mr. William Henry",8.05,805]],note:"Fare in pounds Ã— 100 = fare in cents/pence"},explanation:"Calculations in SELECT are useful for unit conversions. Here we convert pounds to pence (cents) without modifying the original data."},{id:"d3q3",difficulty:"medium",points:15,hintPenalty:5,title:"Family Size",description:"Calculate **family_size** by adding **SibSp + Parch + 1** (the +1 is for the passenger). Show Name and family_size.",tableUsed:"passengers",columnsNeeded:["Name","SibSp","Parch"],hint:"Add the columns: SibSp + Parch + 1 AS family_size. Don't forget the +1 for the passenger!",solution:"SELECT Name, SibSp + Parch + 1 AS family_size FROM passengers;",alternativeSolutions:["SELECT Name, SibSp + Parch + 1 AS family_size FROM passengers","SELECT Name, (SibSp + Parch + 1) AS family_size FROM passengers;"],expectedResult:{columns:["Name","family_size"],rowCount:891,preview:[["Braund, Mr. Owen Harris",2],["Cumings, Mrs. John Bradley",2],["Heikkinen, Miss. Laina",1],["Futrelle, Mrs. Jacques Heath",2],["Allen, Mr. William Henry",1],["Moran, Mr. James",1],["McCarthy, Mr. Timothy J",1],["Palsson, Master. Gosta Leonard",5],["Johnson, Mrs. Oscar W",3],["Nasser, Mrs. Nicholas",2]],note:"SibSp + Parch + 1 = total family members including the passenger"},explanation:"SibSp = siblings + spouse count, Parch = parents + children count. Adding 1 includes the passenger themselves in the family count."},{id:"d3q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Fare Per Person",description:"Calculate **fare_per_person** by dividing **Fare** by family size (SibSp + Parch + 1). Show Name, Fare, and fare_per_person.",tableUsed:"passengers",columnsNeeded:["Name","Fare","SibSp","Parch"],hint:"Divide Fare by the family size: Fare / (SibSp + Parch + 1). Use parentheses!",solution:"SELECT Name, Fare, Fare / (SibSp + Parch + 1) AS fare_per_person FROM passengers;",alternativeSolutions:["SELECT Name, Fare, Fare / (SibSp + Parch + 1) AS fare_per_person FROM passengers"],expectedResult:{columns:["Name","Fare","fare_per_person"],rowCount:891,preview:[["Braund, Mr. Owen Harris",7.25,3.625],["Cumings, Mrs. John Bradley",71.28,35.64],["Heikkinen, Miss. Laina",7.925,7.925],["Futrelle, Mrs. Jacques Heath",53.1,26.55],["Allen, Mr. William Henry",8.05,8.05],["Moran, Mr. James",8.4583,8.4583],["McCarthy, Mr. Timothy J",51.8625,51.8625],["Palsson, Master. Gosta Leonard",21.075,4.215],["Johnson, Mrs. Oscar W",11.1333,3.71],["Nasser, Mrs. Nicholas",30.0708,15.04]],note:"Families often shared one ticket; this estimates per-person cost"},explanation:"Families typically bought one ticket for everyone. Dividing by family size estimates individual fare. The Palsson family (5 people) paid Â£21.075 total = Â£4.215 each."},{id:"d3q5",difficulty:"hard",points:25,hintPenalty:8,title:"Complete Profile",description:"Create a profile: **Name**, **Age**, **Pclass** as **class**, **family_size** (SibSp+Parch+1), and **fare_per_person** (Fare/family_size).",tableUsed:"passengers",columnsNeeded:["Name","Age","Pclass","SibSp","Parch","Fare"],hint:"Five columns with 2 aliases and 2 calculations. You'll need to write the family_size calculation twice or nest it.",solution:"SELECT Name, Age, Pclass AS class, SibSp + Parch + 1 AS family_size, Fare / (SibSp + Parch + 1) AS fare_per_person FROM passengers;",alternativeSolutions:["SELECT Name, Age, Pclass AS class, SibSp + Parch + 1 AS family_size, Fare / (SibSp + Parch + 1) AS fare_per_person FROM passengers"],expectedResult:{columns:["Name","Age","class","family_size","fare_per_person"],rowCount:891,preview:[["Braund, Mr. Owen Harris",22,3,2,3.625],["Cumings, Mrs. John Bradley",38,1,2,35.64],["Heikkinen, Miss. Laina",26,3,1,7.925],["Futrelle, Mrs. Jacques Heath",35,1,2,26.55],["Allen, Mr. William Henry",35,3,1,8.05]],note:"Combines aliases, calculations, and derived values"},explanation:"This query combines multiple techniques: aliases (Pclass AS class), calculations (SibSp + Parch + 1), and complex expressions (Fare / family_size) - all skills used in real-world reporting."}]},{day:4,week:1,title:"Filtering with WHERE",description:"Filter rows using conditions",concepts:["WHERE","=",">","<",">=","<=","!="],tableUsed:"passengers",tableSchema:[{column:"Survived",type:"INTEGER",description:"0=Died, 1=Survived"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Sex",type:"TEXT",description:"'male' or 'female'"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Fare",type:"REAL",description:"Ticket price"}],lesson:"# Filtering with WHERE ðŸ”\n\n## Basic Filtering\n\n```sql\nSELECT * FROM passengers WHERE Pclass = 1;\n```\n\nReturns only first-class passengers.\n\n## Comparison Operators\n\n| Operator | Meaning | Example |\n|----------|---------|---------|\n| = | Equal to | Pclass = 1 |\n| != or <> | Not equal | Pclass != 3 |\n| > | Greater than | Age > 30 |\n| < | Less than | Age < 18 |\n| >= | Greater or equal | Fare >= 50 |\n| <= | Less or equal | Age <= 10 |\n\n## Text Values Need Quotes\n\n```sql\nSELECT * FROM passengers WHERE Sex = 'female';\n```",questions:[{id:"d4q1",difficulty:"easy",points:5,hintPenalty:2,title:"Survivors Only",description:"Select all columns for passengers who **survived** (Survived = 1).",tableUsed:"passengers",columnsNeeded:["*"],filterCondition:"Survived = 1",hint:"Add WHERE after FROM: SELECT * FROM passengers WHERE Survived = 1;",solution:"SELECT * FROM passengers WHERE Survived = 1;",alternativeSolutions:["SELECT * FROM passengers WHERE Survived = 1"],expectedResult:{columns:["PassengerId","Survived","Pclass","Name","Sex","Age","SibSp","Parch","Ticket","Fare","Cabin","Embarked"],rowCount:342,preview:[[2,1,1,"Cumings, Mrs. John Bradley","female",38,1,0,"PC 17599",71.28,"C85","C"],[3,1,3,"Heikkinen, Miss. Laina","female",26,0,0,"STON/O2. 3101282",7.925,null,"S"],[4,1,1,"Futrelle, Mrs. Jacques Heath","female",35,1,0,"113803",53.1,"C123","S"],[9,1,2,"Johnson, Mrs. Oscar W","female",27,0,2,"347742",11.1333,null,"S"],[10,1,2,"Nasser, Mrs. Nicholas","female",14,1,0,"237736",30.0708,null,"C"]],note:"342 of 891 passengers survived (38.4%)"},explanation:"WHERE filters rows based on a condition. Only rows where Survived equals 1 are returned. 342 passengers survived out of 891 total."},{id:"d4q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"First Class",description:"Select **Name**, **Pclass**, and **Fare** for **first class** passengers (Pclass = 1).",tableUsed:"passengers",columnsNeeded:["Name","Pclass","Fare"],filterCondition:"Pclass = 1",hint:"Combine column selection with WHERE: SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 1;",solution:"SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 1;",alternativeSolutions:["SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 1"],expectedResult:{columns:["Name","Pclass","Fare"],rowCount:216,preview:[["Cumings, Mrs. John Bradley",1,71.28],["Futrelle, Mrs. Jacques Heath",1,53.1],["McCarthy, Mr. Timothy J",1,51.8625],["Fortune, Mr. Charles Alexander",1,263],["Sloper, Mr. William Thompson",1,35.5]],note:"216 first-class passengers"},explanation:"First class (Pclass = 1) was the most expensive. 216 passengers traveled in first class, with fares ranging from around Â£26 to over Â£500."},{id:"d4q3",difficulty:"medium",points:15,hintPenalty:5,title:"Adults Over 50",description:"Find passengers **older than 50**. Show **Name** and **Age**.",tableUsed:"passengers",columnsNeeded:["Name","Age"],filterCondition:"Age > 50",hint:"Use the greater than operator: WHERE Age > 50",solution:"SELECT Name, Age FROM passengers WHERE Age > 50;",alternativeSolutions:["SELECT Name, Age FROM passengers WHERE Age > 50"],expectedResult:{columns:["Name","Age"],rowCount:64,preview:[["McCarthy, Mr. Timothy J",54],["Fortune, Mr. Charles Alexander",64],["Sloper, Mr. William Thompson",56],["Bonnell, Miss. Elizabeth",58],["Warren, Mr. Charles William",68]],note:"64 passengers were over 50 years old"},explanation:"The > operator finds values greater than (not equal to) 50. The oldest passenger was 80 years old."},{id:"d4q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Female Passengers",description:"Find all **female** passengers. Show **Name**, **Sex**, and **Age**.",tableUsed:"passengers",columnsNeeded:["Name","Sex","Age"],filterCondition:"Sex = 'female'",hint:"Text values need single quotes: WHERE Sex = 'female' (lowercase, in quotes)",solution:"SELECT Name, Sex, Age FROM passengers WHERE Sex = 'female';",alternativeSolutions:["SELECT Name, Sex, Age FROM passengers WHERE Sex = 'female'"],expectedResult:{columns:["Name","Sex","Age"],rowCount:314,preview:[["Cumings, Mrs. John Bradley","female",38],["Heikkinen, Miss. Laina","female",26],["Futrelle, Mrs. Jacques Heath","female",35],["Johnson, Mrs. Oscar W","female",27],["Nasser, Mrs. Nicholas","female",14]],note:"314 female passengers (35% of total)"},explanation:"Text/string values must be enclosed in single quotes. The value is case-sensitive: 'female' works, 'Female' or 'FEMALE' would not match."},{id:"d4q5",difficulty:"hard",points:25,hintPenalty:8,title:"Expensive Tickets",description:"Find passengers who paid **more than 100** for their ticket. Show **Name**, **Fare**, and **Pclass**.",tableUsed:"passengers",columnsNeeded:["Name","Fare","Pclass"],filterCondition:"Fare > 100",hint:"Numbers don't need quotes: WHERE Fare > 100",solution:"SELECT Name, Fare, Pclass FROM passengers WHERE Fare > 100;",alternativeSolutions:["SELECT Name, Fare, Pclass FROM passengers WHERE Fare > 100"],expectedResult:{columns:["Name","Fare","Pclass"],rowCount:40,preview:[["Fortune, Mr. Charles Alexander",263,1],["Baxter, Mr. Quigg Edmond",247.5208,1],["Astor, Col. John Jacob",227.525,1],["Cardeza, Mr. Thomas Drake Martinez",512.3292,1],["Ward, Miss. Anna",512.3292,1]],note:"40 passengers paid over Â£100 - all first class"},explanation:"Only 40 passengers paid over Â£100, and all were in first class. The highest fare was Â£512.33, paid by 3 passengers sharing a luxury suite."}]},{day:5,week:1,title:"Combining Conditions: AND & OR",description:"Use multiple conditions with logical operators",concepts:["AND","OR","Multiple conditions","Parentheses"],tableUsed:"passengers",tableSchema:[{column:"Survived",type:"INTEGER",description:"0 or 1"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Sex",type:"TEXT",description:"'male' or 'female'"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Fare",type:"REAL",description:"Ticket price"}],lesson:"# Combining Conditions ðŸ”—\n\n## AND - Both must be true\n\n```sql\nSELECT * FROM passengers \nWHERE Sex = 'female' AND Survived = 1;\n```\n\n## OR - At least one must be true\n\n```sql\nSELECT * FROM passengers \nWHERE Pclass = 1 OR Pclass = 2;\n```\n\n## Using Parentheses\n\n```sql\nSELECT * FROM passengers \nWHERE (Pclass = 1 OR Pclass = 2) AND Survived = 1;\n```\n\nParentheses ensure the OR is evaluated first.",questions:[{id:"d5q1",difficulty:"easy",points:5,hintPenalty:2,title:"Female Survivors",description:"Find **female** passengers who **survived**. Show Name, Sex, and Survived.",tableUsed:"passengers",columnsNeeded:["Name","Sex","Survived"],filterCondition:"Sex = 'female' AND Survived = 1",hint:"Combine with AND: WHERE Sex = 'female' AND Survived = 1",solution:"SELECT Name, Sex, Survived FROM passengers WHERE Sex = 'female' AND Survived = 1;",alternativeSolutions:["SELECT Name, Sex, Survived FROM passengers WHERE Sex = 'female' AND Survived = 1"],expectedResult:{columns:["Name","Sex","Survived"],rowCount:233,preview:[["Cumings, Mrs. John Bradley","female",1],["Heikkinen, Miss. Laina","female",1],["Futrelle, Mrs. Jacques Heath","female",1],["Johnson, Mrs. Oscar W","female",1],["Nasser, Mrs. Nicholas","female",1]],note:"233 of 314 female passengers survived (74%)"},explanation:"AND requires both conditions to be true. 233 women survived out of 314 total women (74% survival rate for females)."},{id:"d5q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Upper Classes",description:"Find passengers in **first OR second class**. Show Name and Pclass.",tableUsed:"passengers",columnsNeeded:["Name","Pclass"],filterCondition:"Pclass = 1 OR Pclass = 2",hint:"Use OR: WHERE Pclass = 1 OR Pclass = 2",solution:"SELECT Name, Pclass FROM passengers WHERE Pclass = 1 OR Pclass = 2;",alternativeSolutions:["SELECT Name, Pclass FROM passengers WHERE Pclass = 1 OR Pclass = 2","SELECT Name, Pclass FROM passengers WHERE Pclass IN (1, 2);"],expectedResult:{columns:["Name","Pclass"],rowCount:400,preview:[["Cumings, Mrs. John Bradley",1],["Futrelle, Mrs. Jacques Heath",1],["McCarthy, Mr. Timothy J",1],["Johnson, Mrs. Oscar W",2],["Nasser, Mrs. Nicholas",2]],note:"400 passengers: 216 first class + 184 second class"},explanation:"OR matches either condition. 216 first-class + 184 second-class = 400 passengers in upper classes."},{id:"d5q3",difficulty:"medium",points:15,hintPenalty:5,title:"Young Males",description:"Find **male** passengers **under 18**. Show Name, Sex, and Age.",tableUsed:"passengers",columnsNeeded:["Name","Sex","Age"],filterCondition:"Sex = 'male' AND Age < 18",hint:"Two conditions with AND: WHERE Sex = 'male' AND Age < 18",solution:"SELECT Name, Sex, Age FROM passengers WHERE Sex = 'male' AND Age < 18;",alternativeSolutions:["SELECT Name, Sex, Age FROM passengers WHERE Sex = 'male' AND Age < 18"],expectedResult:{columns:["Name","Sex","Age"],rowCount:64,preview:[["Palsson, Master. Gosta Leonard","male",2],["Moor, Master. Meier","male",6],["Rice, Master. Eugene","male",2],["Goodwin, Master. Sidney Leonard","male",1],["Goodwin, Master. William Frederick","male",11]],note:"64 male passengers under 18 (boys)"},explanation:"64 boys under 18 were aboard. Note the title 'Master' was used for young boys at that time."},{id:"d5q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Third Class, High Fare",description:"Find **third class** passengers who paid **more than 20**. Show Name, Pclass, and Fare.",tableUsed:"passengers",columnsNeeded:["Name","Pclass","Fare"],filterCondition:"Pclass = 3 AND Fare > 20",hint:"WHERE Pclass = 3 AND Fare > 20",solution:"SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 3 AND Fare > 20;",alternativeSolutions:["SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 3 AND Fare > 20"],expectedResult:{columns:["Name","Pclass","Fare"],rowCount:26,preview:[["Palsson, Master. Gosta Leonard",3,21.075],["Andersson, Mr. Anders Johan",3,31.275],["Asplund, Mrs. Carl Oscar",3,31.3875],["Goodwin, Mrs. Frederick",3,46.9],["Rice, Mrs. William",3,29.125]],note:"26 third-class passengers paid over Â£20 (often large families)"},explanation:"Usually third class was cheap, but 26 passengers paid over Â£20 - likely because they were traveling as large families and the fare covered everyone."},{id:"d5q5",difficulty:"hard",points:25,hintPenalty:8,title:"Upper Class Survivors",description:"Find passengers who **survived** AND were in **first OR second class**. Show Name, Survived, and Pclass.",tableUsed:"passengers",columnsNeeded:["Name","Survived","Pclass"],filterCondition:"(Pclass = 1 OR Pclass = 2) AND Survived = 1",hint:"Use parentheses: WHERE Survived = 1 AND (Pclass = 1 OR Pclass = 2)",solution:"SELECT Name, Survived, Pclass FROM passengers WHERE Survived = 1 AND (Pclass = 1 OR Pclass = 2);",alternativeSolutions:["SELECT Name, Survived, Pclass FROM passengers WHERE (Pclass = 1 OR Pclass = 2) AND Survived = 1;"],expectedResult:{columns:["Name","Survived","Pclass"],rowCount:223,preview:[["Cumings, Mrs. John Bradley",1,1],["Futrelle, Mrs. Jacques Heath",1,1],["Johnson, Mrs. Oscar W",1,2],["Nasser, Mrs. Nicholas",1,2],["Fortune, Miss. Mabel Helen",1,1]],note:"223 survivors from first and second class"},explanation:"Parentheses ensure the OR is evaluated first. Without them, the query might be misinterpreted. 223 upper-class passengers survived: 136 from first class + 87 from second class."}]},{day:6,week:1,title:"Sorting with ORDER BY",description:"Sort results in ascending or descending order",concepts:["ORDER BY","ASC","DESC","Multiple column sorting"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Fare",type:"REAL",description:"Ticket price"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"}],lesson:"# Sorting Results ðŸ“Š\n\n## Basic Sorting\n\n```sql\nSELECT * FROM passengers ORDER BY Age;\n```\n\nDefault is ASC (ascending: smallest to largest).\n\n## Descending Order\n\n```sql\nSELECT * FROM passengers ORDER BY Fare DESC;\n```\n\nDESC = largest to smallest.\n\n## Multiple Columns\n\n```sql\nSELECT * FROM passengers \nORDER BY Pclass ASC, Fare DESC;\n```\n\nSort by class first, then by fare within each class.",questions:[{id:"d6q1",difficulty:"easy",points:5,hintPenalty:2,title:"Sort by Age",description:"Select **Name** and **Age**, sorted by **Age** ascending (youngest first).",tableUsed:"passengers",columnsNeeded:["Name","Age"],hint:"Add ORDER BY at the end: SELECT ... FROM ... ORDER BY Age;",solution:"SELECT Name, Age FROM passengers ORDER BY Age;",alternativeSolutions:["SELECT Name, Age FROM passengers ORDER BY Age","SELECT Name, Age FROM passengers ORDER BY Age ASC;"],expectedResult:{columns:["Name","Age"],rowCount:891,preview:[["Thomas, Master. Assad Alexander",.42],["Hamalainen, Master. Viljo",.67],["Aks, Master. Philip Frank",.83],["Baclini, Miss. Marie Catherine",5],["Baclini, Miss. Eugenie",.75]],note:"Youngest: 0.42 years (about 5 months old). NULL ages appear at end."},explanation:"ORDER BY sorts results. Default is ASC (ascending). The youngest passenger was an infant just 5 months old."},{id:"d6q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Highest Fares",description:"Select **Name** and **Fare**, sorted by **Fare descending** (highest first).",tableUsed:"passengers",columnsNeeded:["Name","Fare"],hint:"Use DESC: ORDER BY Fare DESC",solution:"SELECT Name, Fare FROM passengers ORDER BY Fare DESC;",alternativeSolutions:["SELECT Name, Fare FROM passengers ORDER BY Fare DESC"],expectedResult:{columns:["Name","Fare"],rowCount:891,preview:[["Ward, Miss. Anna",512.3292],["Cardeza, Mr. Thomas Drake Martinez",512.3292],["Lesurer, Mr. Gustave J",512.3292],["Baxter, Mr. Quigg Edmond",247.5208],["Astor, Col. John Jacob",227.525]],note:"Top 3 shared highest fare of Â£512.33 (likely shared a suite)"},explanation:"DESC reverses to descending order. Three passengers paid the highest fare of Â£512.33 - they likely shared a luxury suite."},{id:"d6q3",difficulty:"medium",points:15,hintPenalty:5,title:"Alphabetical Names",description:"Select **Name** and **Pclass**, sorted **alphabetically by Name**.",tableUsed:"passengers",columnsNeeded:["Name","Pclass"],hint:"Text sorts alphabetically: ORDER BY Name",solution:"SELECT Name, Pclass FROM passengers ORDER BY Name;",alternativeSolutions:["SELECT Name, Pclass FROM passengers ORDER BY Name","SELECT Name, Pclass FROM passengers ORDER BY Name ASC;"],expectedResult:{columns:["Name","Pclass"],rowCount:891,preview:[["Abbing, Mr. Anthony",3],["Abbott, Mr. Rossmore Edward",3],["Abbott, Mrs. Stanton",3],["Abelson, Mr. Samuel",2],["Abelson, Mrs. Samuel",2]],note:"Alphabetically by last name (surnames starting with A first)"},explanation:"ORDER BY works on text too, sorting alphabetically. Since names are in 'Last, First' format, they sort by last name."},{id:"d6q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Class Then Fare",description:"Sort by **Pclass ascending**, then by **Fare descending** within each class. Show Name, Pclass, Fare.",tableUsed:"passengers",columnsNeeded:["Name","Pclass","Fare"],hint:"Multiple columns: ORDER BY Pclass ASC, Fare DESC",solution:"SELECT Name, Pclass, Fare FROM passengers ORDER BY Pclass ASC, Fare DESC;",alternativeSolutions:["SELECT Name, Pclass, Fare FROM passengers ORDER BY Pclass, Fare DESC;"],expectedResult:{columns:["Name","Pclass","Fare"],rowCount:891,preview:[["Ward, Miss. Anna",1,512.3292],["Cardeza, Mr. Thomas Drake Martinez",1,512.3292],["Lesurer, Mr. Gustave J",1,512.3292],["Baxter, Mr. Quigg Edmond",1,247.5208],["Astor, Col. John Jacob",1,227.525]],note:"First class (1) first with highest fares, then class 2, then class 3"},explanation:"Multiple column sort: first by Pclass (1, 2, 3), then within each class by Fare (highest first). First class passengers with highest fares appear at the top."},{id:"d6q5",difficulty:"hard",points:25,hintPenalty:8,title:"Filtered and Sorted",description:"Find **female survivors**, sorted by **Age descending** (oldest first). Show Name, Age, and Survived.",tableUsed:"passengers",columnsNeeded:["Name","Age","Survived"],filterCondition:"Sex = 'female' AND Survived = 1",hint:"First WHERE to filter, then ORDER BY to sort. The clause order matters!",solution:"SELECT Name, Age, Survived FROM passengers WHERE Sex = 'female' AND Survived = 1 ORDER BY Age DESC;",alternativeSolutions:["SELECT Name, Age, Survived FROM passengers WHERE Sex = 'female' AND Survived = 1 ORDER BY Age DESC"],expectedResult:{columns:["Name","Age","Survived"],rowCount:233,preview:[["Crosby, Mrs. Edward Gifford",64,1],["Warren, Mrs. Frank Manley",60,1],["Stone, Mrs. George Nelson",60,1],["Bonnell, Miss. Elizabeth",58,1],["Brown, Mrs. James Joseph",58,1]],note:"233 female survivors, oldest first (64 years). NULLs at end."},explanation:"WHERE filters first (233 female survivors), then ORDER BY sorts the results. The oldest female survivor was 64 years old."}]},{day:7,week:1,title:"LIMIT and OFFSET",description:"Control how many rows are returned and implement pagination",concepts:["LIMIT","OFFSET","Top N","Pagination"],tableUsed:"passengers",tableSchema:[{column:"passenger_id",type:"INTEGER",description:"Unique ID"},{column:"name",type:"TEXT",description:"Passenger name"},{column:"age",type:"REAL",description:"Age in years"},{column:"fare",type:"REAL",description:"Ticket price"}],lesson:"# Limiting Results ðŸ“„\n\n## LIMIT - Restrict row count\n\n```sql\nSELECT * FROM passengers LIMIT 5;\n```\n\nReturns only the first 5 rows.\n\n## Top N with ORDER BY\n\n```sql\nSELECT Name, Fare FROM passengers\nORDER BY Fare DESC\nLIMIT 10;\n```\n\nGets the 10 highest fares.\n\n## OFFSET - Skip rows\n\n```sql\nSELECT * FROM passengers LIMIT 10 OFFSET 5;\n```\n\nSkips first 5 rows, returns next 10. Used for pagination.",questions:[{id:"d7q1",difficulty:"easy",points:5,hintPenalty:2,title:"First Five",description:"Select **all columns** for the **first 5 passengers**.",tableUsed:"passengers",columnsNeeded:["*"],hint:"Add LIMIT 5 at the end of your query.",solution:"SELECT * FROM passengers LIMIT 5;",alternativeSolutions:["SELECT * FROM passengers LIMIT 5"],expectedResult:{columns:["PassengerId","Survived","Pclass","Name","Sex","Age","SibSp","Parch","Ticket","Fare","Cabin","Embarked"],rowCount:5,preview:[[1,0,3,"Braund, Mr. Owen Harris","male",22,1,0,"A/5 21171",7.25,null,"S"],[2,1,1,"Cumings, Mrs. John Bradley","female",38,1,0,"PC 17599",71.28,"C85","C"],[3,1,3,"Heikkinen, Miss. Laina","female",26,0,0,"STON/O2. 3101282",7.925,null,"S"],[4,1,1,"Futrelle, Mrs. Jacques Heath","female",35,1,0,"113803",53.1,"C123","S"],[5,0,3,"Allen, Mr. William Henry","male",35,0,0,"373450",8.05,null,"S"]],fullResult:!0,note:"Exactly 5 rows returned"},explanation:"LIMIT restricts the output to a specific number of rows. Great for previewing large tables or testing queries."},{id:"d7q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Top 10 Fares",description:"Find the **10 passengers** who paid the **highest fares**. Show Name and Fare.",tableUsed:"passengers",columnsNeeded:["Name","Fare"],hint:"ORDER BY Fare DESC, then LIMIT 10. Order matters!",solution:"SELECT Name, Fare FROM passengers ORDER BY Fare DESC LIMIT 10;",alternativeSolutions:["SELECT Name, Fare FROM passengers ORDER BY Fare DESC LIMIT 10"],expectedResult:{columns:["Name","Fare"],rowCount:10,preview:[["Ward, Miss. Anna",512.3292],["Cardeza, Mr. Thomas Drake Martinez",512.3292],["Lesurer, Mr. Gustave J",512.3292],["Baxter, Mr. Quigg Edmond",247.5208],["Astor, Col. John Jacob",227.525],["Chaffee, Mr. Herbert Fuller",227.525],["Douglas, Mrs. Frederick Charles",227.525],["Spedden, Mr. Frederic Oakley",134.5],["Fortune, Mrs. Mark",134.5],["Fortune, Miss. Ethel Flora",134.5]],fullResult:!0,note:"Top 10 highest fares - all first class passengers"},explanation:"ORDER BY + LIMIT is the 'Top N' pattern - very common in SQL. Sort first to rank, then limit to get the top records."},{id:"d7q3",difficulty:"medium",points:15,hintPenalty:5,title:"Youngest Five",description:"Find the **5 youngest passengers**. Show Name and Age.",tableUsed:"passengers",columnsNeeded:["Name","Age"],hint:"ORDER BY Age ASC (or just ORDER BY Age since ASC is default), then LIMIT 5",solution:"SELECT Name, Age FROM passengers ORDER BY Age LIMIT 5;",alternativeSolutions:["SELECT Name, Age FROM passengers ORDER BY Age ASC LIMIT 5;","SELECT Name, Age FROM passengers ORDER BY Age LIMIT 5"],expectedResult:{columns:["Name","Age"],rowCount:5,preview:[["Thomas, Master. Assad Alexander",.42],["Hamalainen, Master. Viljo",.67],["Baclini, Miss. Eugenie",.75],["Aks, Master. Philip Frank",.83],["Dean, Miss. Elizabeth Gladys",.92]],fullResult:!0,note:"Youngest were all infants under 1 year old"},explanation:"The 5 youngest passengers were all infants. Ages are in years, so 0.42 = about 5 months old."},{id:"d7q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Skip and Take",description:"Get passengers **11-20** (skip first 10, return next 10). Show name and passenger_id.",tableUsed:"passengers",columnsNeeded:["name","passenger_id"],hint:"LIMIT 10 OFFSET 10. OFFSET skips rows, then LIMIT takes rows after.",solution:"SELECT name, passenger_id FROM passengers LIMIT 10 OFFSET 10;",alternativeSolutions:["SELECT name, passenger_id FROM passengers LIMIT 10 OFFSET 10","SELECT Name, Passenger_id FROM passengers LIMIT 10 OFFSET 10","SELECT NAME, PASSENGER_ID FROM passengers LIMIT 10 OFFSET 10"],expectedResult:{columns:["name","passenger_id"],rowCount:10,preview:[["Sandstrom, Miss. Marguerite Rut",11],["Bonnell, Miss. Elizabeth",12],["Saundercock, Mr. William Henry",13],["Andersson, Mr. Anders Johan",14],["Vestrom, Miss. Hulda Amanda Adolfina",15],["Hewlett, Mrs. Mary D Kingcome",16],["Rice, Master. Eugene",17],["Williams, Mr. Charles Eugene",18],["Vander Planke, Mrs. Julius",19],["Masselmani, Mrs. Fatima",20]],fullResult:!0,note:"Rows 11-20 (OFFSET 10 skips 1-10, LIMIT 10 takes next 10)"},explanation:"OFFSET skips the first N rows. OFFSET 10 LIMIT 10 returns rows 11-20. This is the basis for pagination in web applications."},{id:"d7q5",difficulty:"hard",points:25,hintPenalty:8,title:"Complex Pagination",description:"Find the **3rd through 7th highest fares** (skip top 2, get next 5). Show Name and Fare.",tableUsed:"passengers",columnsNeeded:["Name","Fare"],hint:"ORDER BY Fare DESC, then LIMIT 5 OFFSET 2 (skip top 2, take 5)",solution:"SELECT Name, Fare FROM passengers ORDER BY Fare DESC LIMIT 5 OFFSET 2;",alternativeSolutions:["SELECT Name, Fare FROM passengers ORDER BY Fare DESC LIMIT 5 OFFSET 2"],expectedResult:{columns:["Name","Fare"],rowCount:5,preview:[["Lesurer, Mr. Gustave J",512.3292],["Baxter, Mr. Quigg Edmond",247.5208],["Astor, Col. John Jacob",227.525],["Chaffee, Mr. Herbert Fuller",227.525],["Douglas, Mrs. Frederick Charles",227.525]],fullResult:!0,note:"Ranks 3-7 by fare (skipped the top 2)"},explanation:"Combines ORDER BY for ranking, OFFSET to skip the top 2, and LIMIT to take the next 5. Note: 3 passengers tied for highest fare at Â£512.33."}]},{day:8,week:2,title:"Aggregate Functions: COUNT & SUM",description:"Calculate totals and counts from your data",concepts:["COUNT","SUM","Aggregation"],tableUsed:"passengers",tableSchema:[{column:"PassengerId",type:"INTEGER",description:"Unique ID (891 total)"},{column:"Survived",type:"INTEGER",description:"0=Died, 1=Survived"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Age",type:"REAL",description:"Age (177 NULL)"},{column:"Fare",type:"REAL",description:"Ticket price"}],lesson:"# Aggregate Functions ðŸ“Š\n\n## COUNT - Count rows\n\n```sql\nSELECT COUNT(*) FROM passengers;       -- All rows: 891\nSELECT COUNT(Age) FROM passengers;     -- Non-NULL ages: 714\n```\n\n## SUM - Add values\n\n```sql\nSELECT SUM(Fare) FROM passengers;      -- Total: Â£28,693.95\nSELECT SUM(Survived) FROM passengers;  -- Survivors: 342\n```\n\n## Always use aliases!\n\n```sql\nSELECT COUNT(*) AS total_passengers FROM passengers;\n```",questions:[{id:"d8q1",difficulty:"easy",points:5,hintPenalty:2,title:"Count All",description:"Count the **total number of passengers** in the dataset.",tableUsed:"passengers",aggregateFunction:"COUNT(*)",hint:"Use COUNT(*) to count all rows: SELECT COUNT(*) FROM passengers;",solution:"SELECT COUNT(*) FROM passengers;",alternativeSolutions:["SELECT COUNT(*) FROM passengers","SELECT COUNT(*) AS count FROM passengers;"],expectedResult:{columns:["COUNT(*)"],rowCount:1,preview:[[891]],fullResult:!0,note:"891 passengers in the Titanic dataset"},explanation:"COUNT(*) counts all rows regardless of NULL values. The Titanic dataset contains 891 passenger records."},{id:"d8q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Count with Alias",description:"Count total passengers and display as **total_passengers**.",tableUsed:"passengers",aggregateFunction:"COUNT(*)",hint:"Add AS alias: SELECT COUNT(*) AS total_passengers FROM passengers;",solution:"SELECT COUNT(*) AS total_passengers FROM passengers;",alternativeSolutions:["SELECT COUNT(*) AS total_passengers FROM passengers"],expectedResult:{columns:["total_passengers"],rowCount:1,preview:[[891]],fullResult:!0,note:"Same result, but column named 'total_passengers'"},explanation:"Always use aliases with aggregates to make results more readable. 'total_passengers' is clearer than 'COUNT(*)'."},{id:"d8q3",difficulty:"medium",points:15,hintPenalty:5,title:"Sum of Survivors",description:"Calculate the **number of survivors** using SUM on the Survived column. Display as **survivors**.",tableUsed:"passengers",aggregateFunction:"SUM(Survived)",hint:"Since Survived is 0 or 1, SUM(Survived) counts survivors. Try: SELECT SUM(Survived) AS survivors FROM passengers;",solution:"SELECT SUM(Survived) AS survivors FROM passengers;",alternativeSolutions:["SELECT SUM(Survived) AS survivors FROM passengers"],expectedResult:{columns:["survivors"],rowCount:1,preview:[[342]],fullResult:!0,note:"342 passengers survived (38.4% survival rate)"},explanation:"Since Survived is 0 or 1, SUM counts the survivors (all the 1s add up). 342 out of 891 passengers survived."},{id:"d8q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Total Revenue",description:"Calculate the **total of all fares** collected. Display as **total_revenue**.",tableUsed:"passengers",aggregateFunction:"SUM(Fare)",hint:"SUM(Fare) adds up all ticket prices.",solution:"SELECT SUM(Fare) AS total_revenue FROM passengers;",alternativeSolutions:["SELECT SUM(Fare) AS total_revenue FROM passengers"],expectedResult:{columns:["total_revenue"],rowCount:1,preview:[[28693.9493]],fullResult:!0,note:"Total fare revenue: approximately Â£28,694"},explanation:"SUM adds all values in a column. The Titanic collected about Â£28,694 in passenger fares."},{id:"d8q5",difficulty:"hard",points:25,hintPenalty:8,title:"Multiple Aggregates",description:"Show **total_passengers** (COUNT), **survivors** (SUM of Survived), and **total_fare** (SUM of Fare) in one query.",tableUsed:"passengers",aggregateFunction:"COUNT(*), SUM(Survived), SUM(Fare)",hint:"Multiple aggregates: SELECT COUNT(*) AS a, SUM(col1) AS b, SUM(col2) AS c FROM table;",solution:"SELECT COUNT(*) AS total_passengers, SUM(Survived) AS survivors, SUM(Fare) AS total_fare FROM passengers;",alternativeSolutions:["SELECT COUNT(*) AS total_passengers, SUM(Survived) AS survivors, SUM(Fare) AS total_fare FROM passengers"],expectedResult:{columns:["total_passengers","survivors","total_fare"],rowCount:1,preview:[[891,342,28693.9493]],fullResult:!0,note:"A summary dashboard in one query!"},explanation:"You can use multiple aggregate functions in one SELECT to create a summary. This is like a mini dashboard showing key metrics."}]},{day:9,week:2,title:"Aggregate Functions: AVG, MIN, MAX",description:"Calculate averages and find extreme values",concepts:["AVG","MIN","MAX","Statistics"],tableUsed:"passengers",tableSchema:[{column:"Age",type:"REAL",description:"Age in years (177 NULL)"},{column:"Fare",type:"REAL",description:"Ticket price"},{column:"Survived",type:"INTEGER",description:"0 or 1"}],lesson:"# More Aggregate Functions ðŸ“ˆ\n\n## AVG - Calculate average\n\n```sql\nSELECT AVG(Age) FROM passengers;  -- ~29.7 years\n```\n\nNote: AVG ignores NULL values.\n\n## MIN and MAX\n\n```sql\nSELECT MIN(Age), MAX(Age) FROM passengers;\n-- Returns: 0.42 and 80\n```\n\n## Survival Rate Trick\n\n```sql\nSELECT AVG(Survived) * 100 AS survival_rate\nFROM passengers;\n-- Returns: 38.38 (38.38%)\n```",questions:[{id:"d9q1",difficulty:"easy",points:5,hintPenalty:2,title:"Average Age",description:"Calculate the **average passenger age**. Display as **avg_age**.",tableUsed:"passengers",aggregateFunction:"AVG(Age)",hint:"Use AVG(Age): SELECT AVG(Age) AS avg_age FROM passengers;",solution:"SELECT AVG(Age) AS avg_age FROM passengers;",alternativeSolutions:["SELECT AVG(Age) AS avg_age FROM passengers"],expectedResult:{columns:["avg_age"],rowCount:1,preview:[[29.6991]],fullResult:!0,note:"Average age: ~29.7 years (NULL ages excluded from calculation)"},explanation:"AVG calculates the mean, ignoring NULL values. The average passenger age was about 30 years."},{id:"d9q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Age Range",description:"Find the **youngest** (MIN) and **oldest** (MAX) passenger ages. Name them **youngest** and **oldest**.",tableUsed:"passengers",aggregateFunction:"MIN(Age), MAX(Age)",hint:"SELECT MIN(Age) AS youngest, MAX(Age) AS oldest FROM passengers;",solution:"SELECT MIN(Age) AS youngest, MAX(Age) AS oldest FROM passengers;",alternativeSolutions:["SELECT MIN(Age) AS youngest, MAX(Age) AS oldest FROM passengers"],expectedResult:{columns:["youngest","oldest"],rowCount:1,preview:[[.42,80]],fullResult:!0,note:"Youngest: 0.42 years (~5 months), Oldest: 80 years"},explanation:"MIN finds the smallest value, MAX finds the largest. The age range was 0.42 to 80 years."},{id:"d9q3",difficulty:"medium",points:15,hintPenalty:5,title:"Fare Statistics",description:"Calculate **min_fare**, **max_fare**, and **avg_fare**.",tableUsed:"passengers",aggregateFunction:"MIN(Fare), MAX(Fare), AVG(Fare)",hint:"Combine MIN, MAX, AVG in one query with aliases.",solution:"SELECT MIN(Fare) AS min_fare, MAX(Fare) AS max_fare, AVG(Fare) AS avg_fare FROM passengers;",alternativeSolutions:["SELECT MIN(Fare) AS min_fare, MAX(Fare) AS max_fare, AVG(Fare) AS avg_fare FROM passengers"],expectedResult:{columns:["min_fare","max_fare","avg_fare"],rowCount:1,preview:[[0,512.3292,32.2042]],fullResult:!0,note:"Min: Â£0 (free), Max: Â£512.33 (luxury suite), Avg: Â£32.20"},explanation:"Some passengers had free tickets (Â£0), while luxury suites cost Â£512.33. Average fare was about Â£32."},{id:"d9q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Survival Rate",description:"Calculate the **survival rate as a percentage**: AVG(Survived) Ã— 100. Display as **survival_rate_pct**.",tableUsed:"passengers",aggregateFunction:"AVG(Survived) * 100",hint:"Since Survived is 0 or 1, AVG gives the proportion. Multiply by 100 for percentage.",solution:"SELECT AVG(Survived) * 100 AS survival_rate_pct FROM passengers;",alternativeSolutions:["SELECT AVG(Survived) * 100 AS survival_rate_pct FROM passengers"],expectedResult:{columns:["survival_rate_pct"],rowCount:1,preview:[[38.3838]],fullResult:!0,note:"38.38% of passengers survived"},explanation:"AVG of a 0/1 column gives the proportion. Multiply by 100 for percentage. About 38.4% of passengers survived."},{id:"d9q5",difficulty:"hard",points:25,hintPenalty:8,title:"Complete Statistics",description:"Create a summary: **total** (COUNT), **survivors** (SUM), **survival_rate** (AVGÃ—100), **avg_age**, and **avg_fare**.",tableUsed:"passengers",aggregateFunction:"COUNT, SUM, AVG",hint:"Five aggregates in one SELECT with appropriate aliases.",solution:"SELECT COUNT(*) AS total, SUM(Survived) AS survivors, AVG(Survived) * 100 AS survival_rate, AVG(Age) AS avg_age, AVG(Fare) AS avg_fare FROM passengers;",alternativeSolutions:["SELECT COUNT(*) AS total, SUM(Survived) AS survivors, AVG(Survived) * 100 AS survival_rate, AVG(Age) AS avg_age, AVG(Fare) AS avg_fare FROM passengers"],expectedResult:{columns:["total","survivors","survival_rate","avg_age","avg_fare"],rowCount:1,preview:[[891,342,38.3838,29.6991,32.2042]],fullResult:!0,note:"Complete Titanic statistics dashboard"},explanation:"This creates a comprehensive statistics dashboard: 891 passengers, 342 survived (38.4%), average age 30, average fare Â£32."}]},{day:10,week:2,title:"GROUP BY Basics",description:"Group data and calculate aggregates per group",concepts:["GROUP BY","Per-group aggregates"],tableUsed:"passengers",tableSchema:[{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Sex",type:"TEXT",description:"'male' or 'female'"},{column:"Survived",type:"INTEGER",description:"0 or 1"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Fare",type:"REAL",description:"Ticket price"}],lesson:"# GROUP BY - Per-Group Statistics ðŸ“Š\n\n## Basic GROUP BY\n\n```sql\nSELECT Pclass, COUNT(*) AS count\nFROM passengers\nGROUP BY Pclass;\n```\n\nReturns one row per class with count.\n\n## Rule\n\nEvery column in SELECT must either:\n1. Be in GROUP BY, OR\n2. Be inside an aggregate function\n\n## Example\n\n```sql\nSELECT Sex, AVG(Age) AS avg_age\nFROM passengers\nGROUP BY Sex;\n```",questions:[{id:"d10q1",difficulty:"easy",points:5,hintPenalty:2,title:"Count by Class",description:"Count how many passengers were in **each class**. Show Pclass and count.",tableUsed:"passengers",aggregateFunction:"COUNT(*)",groupBy:"Pclass",hint:"GROUP BY Pclass: SELECT Pclass, COUNT(*) AS count FROM passengers GROUP BY Pclass;",solution:"SELECT Pclass, COUNT(*) AS count FROM passengers GROUP BY Pclass;",alternativeSolutions:["SELECT Pclass, COUNT(*) AS count FROM passengers GROUP BY Pclass"],expectedResult:{columns:["Pclass","count"],rowCount:3,preview:[[1,216],[2,184],[3,491]],fullResult:!0,note:"1st: 216, 2nd: 184, 3rd: 491 passengers"},explanation:"GROUP BY creates separate buckets. Each class gets its own count: 216 in 1st, 184 in 2nd, 491 in 3rd class."},{id:"d10q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Count by Gender",description:"Count passengers by **Sex**. Show Sex and count as **total**.",tableUsed:"passengers",aggregateFunction:"COUNT(*)",groupBy:"Sex",hint:"GROUP BY Sex with COUNT(*) AS total",solution:"SELECT Sex, COUNT(*) AS total FROM passengers GROUP BY Sex;",alternativeSolutions:["SELECT Sex, COUNT(*) AS total FROM passengers GROUP BY Sex"],expectedResult:{columns:["Sex","total"],rowCount:2,preview:[["female",314],["male",577]],fullResult:!0,note:"314 female, 577 male passengers"},explanation:"314 women and 577 men were aboard - about 35% female, 65% male."},{id:"d10q3",difficulty:"medium",points:15,hintPenalty:5,title:"Average Fare by Class",description:"Calculate **average fare** for each **Pclass**. Show Pclass and avg_fare.",tableUsed:"passengers",aggregateFunction:"AVG(Fare)",groupBy:"Pclass",hint:"Use AVG(Fare) with GROUP BY Pclass",solution:"SELECT Pclass, AVG(Fare) AS avg_fare FROM passengers GROUP BY Pclass;",alternativeSolutions:["SELECT Pclass, AVG(Fare) AS avg_fare FROM passengers GROUP BY Pclass"],expectedResult:{columns:["Pclass","avg_fare"],rowCount:3,preview:[[1,84.1547],[2,20.6622],[3,13.6756]],fullResult:!0,note:"1st: Â£84, 2nd: Â£21, 3rd: Â£14 average fare"},explanation:"First class averaged Â£84, second Â£21, third Â£14. First class was ~6Ã— more expensive than third!"},{id:"d10q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Survival by Gender",description:"Calculate **survival rate** (AVGÃ—100) and **survivor count** for each **Sex**. Show Sex, survival_rate, and survivors.",tableUsed:"passengers",aggregateFunction:"AVG(Survived) * 100, SUM(Survived)",groupBy:"Sex",hint:"GROUP BY Sex with AVG(Survived)*100 and SUM(Survived)",solution:"SELECT Sex, AVG(Survived) * 100 AS survival_rate, SUM(Survived) AS survivors FROM passengers GROUP BY Sex;",alternativeSolutions:["SELECT Sex, AVG(Survived) * 100 AS survival_rate, SUM(Survived) AS survivors FROM passengers GROUP BY Sex"],expectedResult:{columns:["Sex","survival_rate","survivors"],rowCount:2,preview:[["female",74.2038,233],["male",18.8908,109]],fullResult:!0,note:"Women: 74% survived. Men: only 19% survived."},explanation:"Women had 74% survival rate, men only 19%. The 'women and children first' policy is clearly visible in the data."},{id:"d10q5",difficulty:"hard",points:25,hintPenalty:8,title:"Class Statistics",description:"For each **Pclass**, show: **total** passengers, **survivors**, **survival_rate** (%), and **avg_age**.",tableUsed:"passengers",aggregateFunction:"COUNT(*), SUM(Survived), AVG(Survived)*100, AVG(Age)",groupBy:"Pclass",hint:"Four aggregates with GROUP BY Pclass",solution:"SELECT Pclass, COUNT(*) AS total, SUM(Survived) AS survivors, AVG(Survived) * 100 AS survival_rate, AVG(Age) AS avg_age FROM passengers GROUP BY Pclass;",alternativeSolutions:["SELECT Pclass, COUNT(*) AS total, SUM(Survived) AS survivors, AVG(Survived) * 100 AS survival_rate, AVG(Age) AS avg_age FROM passengers GROUP BY Pclass"],expectedResult:{columns:["Pclass","total","survivors","survival_rate","avg_age"],rowCount:3,preview:[[1,216,136,62.963,38.2334],[2,184,87,47.2826,29.8776],[3,491,119,24.2363,25.1406]],fullResult:!0,note:"1st: 63% survival, 2nd: 47%, 3rd: only 24%"},explanation:"Class mattered for survival: 1st class 63%, 2nd class 47%, 3rd class only 24%. First class was also older on average."}]},{day:11,week:2,title:"HAVING Clause",description:"Filter groups after aggregation",concepts:["HAVING","WHERE vs HAVING","Group filtering"],tableUsed:"passengers",tableSchema:[{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Sex",type:"TEXT",description:"'male' or 'female'"},{column:"Embarked",type:"TEXT",description:"S, C, Q, or NULL"},{column:"Survived",type:"INTEGER",description:"0 or 1"},{column:"Fare",type:"REAL",description:"Ticket price"}],lesson:"# HAVING - Filter After Grouping ðŸ”\n\n## WHERE vs HAVING\n\n- **WHERE**: Filters rows BEFORE grouping\n- **HAVING**: Filters groups AFTER aggregation\n\n```sql\nSELECT Pclass, COUNT(*) AS count\nFROM passengers\nGROUP BY Pclass\nHAVING COUNT(*) > 200;\n```\n\n## Using Both\n\n```sql\nSELECT Embarked, COUNT(*) AS count\nFROM passengers\nWHERE Age > 18\nGROUP BY Embarked\nHAVING COUNT(*) > 100;\n```",questions:[{id:"d11q1",difficulty:"easy",points:5,hintPenalty:2,title:"Large Groups",description:"Find embarkation ports with **more than 100 passengers**. Show Embarked and count.",tableUsed:"passengers",aggregateFunction:"COUNT(*)",groupBy:"Embarked",having:"COUNT(*) > 100",hint:"GROUP BY Embarked, then HAVING COUNT(*) > 100",solution:"SELECT Embarked, COUNT(*) AS count FROM passengers GROUP BY Embarked HAVING COUNT(*) > 100;",alternativeSolutions:["SELECT Embarked, COUNT(*) AS count FROM passengers GROUP BY Embarked HAVING COUNT(*) > 100"],expectedResult:{columns:["Embarked","count"],rowCount:2,preview:[["C",168],["S",644]],fullResult:!0,note:"Cherbourg (168) and Southampton (644) had 100+ passengers"},explanation:"HAVING filters groups after aggregation. Southampton (S) and Cherbourg (C) had over 100 passengers. Queenstown (Q) had only 77."},{id:"d11q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"High Survival Groups",description:"Find groups by **Sex** where **survival rate > 50%**. Show Sex and survival_rate.",tableUsed:"passengers",aggregateFunction:"AVG(Survived) * 100",groupBy:"Sex",having:"AVG(Survived) > 0.5",hint:"HAVING AVG(Survived) > 0.5 (or > 0.50 for 50%)",solution:"SELECT Sex, AVG(Survived) * 100 AS survival_rate FROM passengers GROUP BY Sex HAVING AVG(Survived) > 0.5;",alternativeSolutions:["SELECT Sex, AVG(Survived) * 100 AS survival_rate FROM passengers GROUP BY Sex HAVING AVG(Survived) > 0.5"],expectedResult:{columns:["Sex","survival_rate"],rowCount:1,preview:[["female",74.2038]],fullResult:!0,note:"Only females had >50% survival rate"},explanation:"Only females had over 50% survival rate (74%). Males had only 19% survival rate."},{id:"d11q3",difficulty:"medium",points:15,hintPenalty:5,title:"Expensive Classes",description:"Find classes where **average fare > 30**. Show Pclass and avg_fare.",tableUsed:"passengers",aggregateFunction:"AVG(Fare)",groupBy:"Pclass",having:"AVG(Fare) > 30",hint:"GROUP BY Pclass, HAVING AVG(Fare) > 30",solution:"SELECT Pclass, AVG(Fare) AS avg_fare FROM passengers GROUP BY Pclass HAVING AVG(Fare) > 30;",alternativeSolutions:["SELECT Pclass, AVG(Fare) AS avg_fare FROM passengers GROUP BY Pclass HAVING AVG(Fare) > 30"],expectedResult:{columns:["Pclass","avg_fare"],rowCount:1,preview:[[1,84.1547]],fullResult:!0,note:"Only first class had average fare over Â£30"},explanation:"Only first class (avg Â£84) exceeds Â£30 average fare. Second class was Â£21, third was Â£14."},{id:"d11q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"WHERE and HAVING",description:"Count **adult** passengers (Age >= 18) per class, but only show classes with **more than 100 adults**.",tableUsed:"passengers",filterCondition:"Age >= 18",aggregateFunction:"COUNT(*)",groupBy:"Pclass",having:"COUNT(*) > 100",hint:"WHERE Age >= 18 (before GROUP BY), HAVING COUNT(*) > 100 (after)",solution:"SELECT Pclass, COUNT(*) AS adult_count FROM passengers WHERE Age >= 18 GROUP BY Pclass HAVING COUNT(*) > 100;",alternativeSolutions:["SELECT Pclass, COUNT(*) AS adult_count FROM passengers WHERE Age >= 18 GROUP BY Pclass HAVING COUNT(*) > 100"],expectedResult:{columns:["Pclass","adult_count"],rowCount:2,preview:[[1,175],[3,276]],fullResult:!0,note:"Classes 1 and 3 had 100+ adults (class 2 had only 97)"},explanation:"WHERE filters rows first (adults only), GROUP BY groups them, HAVING filters groups (100+ adults). Second class had only 97 adults."},{id:"d11q5",difficulty:"hard",points:25,hintPenalty:8,title:"Complex Group Filter",description:"Group by **Embarked**: show port, count, and avg_fare. Only include ports with **count > 50** AND **avg_fare > 20**.",tableUsed:"passengers",aggregateFunction:"COUNT(*), AVG(Fare)",groupBy:"Embarked",having:"COUNT(*) > 50 AND AVG(Fare) > 20",hint:"Two conditions in HAVING: HAVING COUNT(*) > 50 AND AVG(Fare) > 20",solution:"SELECT Embarked, COUNT(*) AS count, AVG(Fare) AS avg_fare FROM passengers GROUP BY Embarked HAVING COUNT(*) > 50 AND AVG(Fare) > 20;",alternativeSolutions:["SELECT Embarked, COUNT(*) AS count, AVG(Fare) AS avg_fare FROM passengers GROUP BY Embarked HAVING COUNT(*) > 50 AND AVG(Fare) > 20"],expectedResult:{columns:["Embarked","count","avg_fare"],rowCount:2,preview:[["C",168,59.9541],["S",644,27.0798]],fullResult:!0,note:"Cherbourg and Southampton meet both criteria"},explanation:"Cherbourg (C) and Southampton (S) both have 50+ passengers and avg fare over Â£20. Queenstown (Q) had low average fare."}]},{day:12,week:2,title:"LIKE & Pattern Matching",description:"Search for patterns in text data",concepts:["LIKE","%","_","Pattern matching"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Full name with title"},{column:"Ticket",type:"TEXT",description:"Ticket number"},{column:"Cabin",type:"TEXT",description:"Cabin number"}],lesson:"# Pattern Matching with LIKE ðŸ”Ž\n\n## Wildcards\n\n- **%** matches any sequence (0 or more characters)\n- **_** matches exactly one character\n\n## Examples\n\n```sql\n-- Names starting with 'A'\nSELECT * FROM passengers WHERE Name LIKE 'A%';\n\n-- Names containing 'Mrs.'\nSELECT * FROM passengers WHERE Name LIKE '%Mrs.%';\n\n-- Names ending with 'son'\nSELECT * FROM passengers WHERE Name LIKE '%son';\n```",questions:[{id:"d12q1",difficulty:"easy",points:5,hintPenalty:2,title:"Names Starting With B",description:"Find passengers whose **Name starts with 'B'**. Show Name only.",tableUsed:"passengers",columnsNeeded:["Name"],filterCondition:"Name LIKE 'B%'",hint:"LIKE 'B%' - B followed by anything",solution:"SELECT Name FROM passengers WHERE Name LIKE 'B%';",alternativeSolutions:["SELECT Name FROM passengers WHERE Name LIKE 'B%'"],expectedResult:{columns:["Name"],rowCount:72,preview:[["Braund, Mr. Owen Harris"],["Bonnell, Miss. Elizabeth"],["Backstrom, Mrs. Karl Alfred"],["Baxter, Mr. Quigg Edmond"],["Becker, Mrs. Allen Oliver"]],note:"72 passengers have names starting with B"},explanation:"LIKE 'B%' matches any string starting with B. The % matches everything that comes after."},{id:"d12q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Married Women",description:"Find passengers with **'Mrs.'** in their name. Show Name.",tableUsed:"passengers",columnsNeeded:["Name"],filterCondition:"Name LIKE '%Mrs.%'",hint:"Use % on both sides: '%Mrs.%' to find it anywhere in the name",solution:"SELECT Name FROM passengers WHERE Name LIKE '%Mrs.%';",alternativeSolutions:["SELECT Name FROM passengers WHERE Name LIKE '%Mrs.%'"],expectedResult:{columns:["Name"],rowCount:129,preview:[["Cumings, Mrs. John Bradley"],["Futrelle, Mrs. Jacques Heath"],["Johnson, Mrs. Oscar W"],["Nasser, Mrs. Nicholas"],["Hewlett, Mrs. Mary D Kingcome"]],note:"129 married women (Mrs.) aboard"},explanation:"% on both sides finds the pattern anywhere in the string. 'Mrs.' indicates married women in Victorian naming conventions."},{id:"d12q3",difficulty:"medium",points:15,hintPenalty:5,title:"Scandinavian Names",description:"Find passengers whose **Name ends with 'son'**. Show Name.",tableUsed:"passengers",columnsNeeded:["Name"],filterCondition:"Name LIKE '%son'",hint:"LIKE '%son' - anything followed by 'son' at the end",solution:"SELECT Name FROM passengers WHERE Name LIKE '%son';",alternativeSolutions:["SELECT Name FROM passengers WHERE Name LIKE '%son'"],expectedResult:{columns:["Name"],rowCount:32,preview:[["Andersson, Mr. Anders Johan"],["Johnson, Mrs. Oscar W"],["Olsson, Miss. Elina"],["Nilsson, Mr. August Ferdinand"],["Svensson, Mr. Johan"]],note:"32 passengers with names ending in 'son' (common Scandinavian pattern)"},explanation:"Many Scandinavian names end in 'son' (meaning 'son of'): Johnson, Andersson, Nilsson, etc."},{id:"d12q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Young Boys",description:"Find passengers with **'Master'** in their name (title for young boys). Show Name and Age.",tableUsed:"passengers",columnsNeeded:["Name","Age"],filterCondition:"Name LIKE '%Master%'",hint:"'Master' was the title for young boys. Use %Master%",solution:"SELECT Name, Age FROM passengers WHERE Name LIKE '%Master%';",alternativeSolutions:["SELECT Name, Age FROM passengers WHERE Name LIKE '%Master%'"],expectedResult:{columns:["Name","Age"],rowCount:40,preview:[["Palsson, Master. Gosta Leonard",2],["Moor, Master. Meier",6],["Rice, Master. Eugene",2],["Goodwin, Master. Sidney Leonard",1],["Goodwin, Master. William Frederick",11]],note:"40 young boys with title 'Master'"},explanation:"'Master' was the historical title for boys. 40 boys under the title 'Master' were aboard."},{id:"d12q5",difficulty:"hard",points:25,hintPenalty:8,title:"Multiple Patterns",description:"Find passengers whose name **starts with 'S'** AND **contains 'Miss'**. Show Name.",tableUsed:"passengers",columnsNeeded:["Name"],filterCondition:"Name LIKE 'S%' AND Name LIKE '%Miss%'",hint:"Combine two LIKE conditions with AND",solution:"SELECT Name FROM passengers WHERE Name LIKE 'S%' AND Name LIKE '%Miss%';",alternativeSolutions:["SELECT Name FROM passengers WHERE Name LIKE 'S%' AND Name LIKE '%Miss%'"],expectedResult:{columns:["Name"],rowCount:12,preview:[["Sandstrom, Miss. Marguerite Rut"],["Sjoblom, Miss. Anna Sofia"],["Strom, Miss. Telma Matilda"],["Skoog, Miss. Mabel"],["Skoog, Miss. Margit Elizabeth"]],note:"12 unmarried women (Miss) with last names starting with S"},explanation:"Combining patterns: name starts with S (last name) and contains 'Miss' (unmarried woman). 12 passengers match."}]},{day:13,week:2,title:"Working with NULL",description:"Handle missing values in your queries",concepts:["NULL","IS NULL","IS NOT NULL","COALESCE"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Age",type:"REAL",description:"Age (177 NULL values)"},{column:"Cabin",type:"TEXT",description:"Cabin (687 NULL values)"},{column:"Embarked",type:"TEXT",description:"Port (2 NULL values)"}],lesson:'# Handling NULL Values â“\n\nNULL means "unknown" or "missing" - NOT zero or empty string.\n\n## Check for NULL\n\n```sql\nSELECT * FROM passengers WHERE Age IS NULL;\nSELECT * FROM passengers WHERE Age IS NOT NULL;\n```\n\nâš ï¸ **Important**: = NULL doesn\'t work! Always use IS NULL.\n\n## COALESCE - Replace NULL\n\n```sql\nSELECT Name, COALESCE(Age, 0) AS age\nFROM passengers;\n```\n\nReturns Age if not null, otherwise 0.',questions:[{id:"d13q1",difficulty:"easy",points:5,hintPenalty:2,title:"Missing Ages",description:"Find passengers with **unknown age** (Age IS NULL). Show Name only.",tableUsed:"passengers",columnsNeeded:["Name"],filterCondition:"Age IS NULL",hint:"Use IS NULL, not = NULL: WHERE Age IS NULL",solution:"SELECT Name FROM passengers WHERE Age IS NULL;",alternativeSolutions:["SELECT Name FROM passengers WHERE Age IS NULL"],expectedResult:{columns:["Name"],rowCount:177,preview:[["Moran, Mr. James"],["Storey, Mr. Thomas"],["Lam, Mr. Ali"],["Connolly, Miss. Kate"],["Parkes, Mr. Francis"]],note:"177 passengers have no recorded age"},explanation:"IS NULL finds rows where the value is missing. 177 passengers had no recorded age."},{id:"d13q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Known Ages",description:"Find passengers with **known age** (Age IS NOT NULL). Show Name and Age.",tableUsed:"passengers",columnsNeeded:["Name","Age"],filterCondition:"Age IS NOT NULL",hint:"IS NOT NULL finds non-missing values",solution:"SELECT Name, Age FROM passengers WHERE Age IS NOT NULL;",alternativeSolutions:["SELECT Name, Age FROM passengers WHERE Age IS NOT NULL"],expectedResult:{columns:["Name","Age"],rowCount:714,preview:[["Braund, Mr. Owen Harris",22],["Cumings, Mrs. John Bradley",38],["Heikkinen, Miss. Laina",26],["Futrelle, Mrs. Jacques Heath",35],["Allen, Mr. William Henry",35]],note:"714 passengers have recorded ages (891 - 177 = 714)"},explanation:"714 of 891 passengers have recorded ages. IS NOT NULL finds non-missing values."},{id:"d13q3",difficulty:"medium",points:15,hintPenalty:5,title:"Has Cabin",description:"Count passengers **with** a cabin assigned (Cabin IS NOT NULL).",tableUsed:"passengers",aggregateFunction:"COUNT(*)",filterCondition:"Cabin IS NOT NULL",hint:"WHERE Cabin IS NOT NULL with COUNT(*)",solution:"SELECT COUNT(*) AS has_cabin FROM passengers WHERE Cabin IS NOT NULL;",alternativeSolutions:["SELECT COUNT(*) AS has_cabin FROM passengers WHERE Cabin IS NOT NULL"],expectedResult:{columns:["has_cabin"],rowCount:1,preview:[[204]],fullResult:!0,note:"Only 204 of 891 passengers had cabin numbers recorded"},explanation:"Only 204 passengers (23%) had cabin numbers recorded - mostly first class passengers."},{id:"d13q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Replace NULL Age",description:"Show Name and Age, but **replace NULL ages with 0** using COALESCE. Call it **age_filled**.",tableUsed:"passengers",columnsNeeded:["Name","Age"],hint:"COALESCE(Age, 0) returns Age if not null, else 0",solution:"SELECT Name, COALESCE(Age, 0) AS age_filled FROM passengers;",alternativeSolutions:["SELECT Name, COALESCE(Age, 0) AS age_filled FROM passengers"],expectedResult:{columns:["Name","age_filled"],rowCount:891,preview:[["Braund, Mr. Owen Harris",22],["Cumings, Mrs. John Bradley",38],["Heikkinen, Miss. Laina",26],["Futrelle, Mrs. Jacques Heath",35],["Allen, Mr. William Henry",35],["Moran, Mr. James",0]],note:"NULL ages now show as 0 (Moran had NULL age)"},explanation:"COALESCE returns the first non-NULL value. If Age is NULL, it returns 0 instead."},{id:"d13q5",difficulty:"hard",points:25,hintPenalty:8,title:"NULL Statistics",description:"Count how many passengers have **NULL Age** vs **NOT NULL Age** in one query. Show null_count and not_null_count.",tableUsed:"passengers",aggregateFunction:"SUM(CASE...)",hint:"Use SUM with CASE: SUM(CASE WHEN Age IS NULL THEN 1 ELSE 0 END)",solution:"SELECT SUM(CASE WHEN Age IS NULL THEN 1 ELSE 0 END) AS null_count, SUM(CASE WHEN Age IS NOT NULL THEN 1 ELSE 0 END) AS not_null_count FROM passengers;",alternativeSolutions:["SELECT SUM(CASE WHEN Age IS NULL THEN 1 ELSE 0 END) AS null_count, SUM(CASE WHEN Age IS NOT NULL THEN 1 ELSE 0 END) AS not_null_count FROM passengers"],expectedResult:{columns:["null_count","not_null_count"],rowCount:1,preview:[[177,714]],fullResult:!0,note:"177 NULL + 714 NOT NULL = 891 total"},explanation:"CASE inside SUM counts conditionally. 177 passengers have NULL ages, 714 have known ages. Total: 891."}]},{day:14,week:2,title:"CASE Statements",description:"Add conditional logic to your queries",concepts:["CASE","WHEN","THEN","ELSE","END"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"},{column:"Fare",type:"REAL",description:"Ticket price"},{column:"Survived",type:"INTEGER",description:"0 or 1"}],lesson:"# Conditional Logic with CASE ðŸ”€\n\n## Basic CASE\n\n```sql\nSELECT Name,\n  CASE \n    WHEN Age < 18 THEN 'Child'\n    WHEN Age < 65 THEN 'Adult'\n    ELSE 'Senior'\n  END AS age_group\nFROM passengers;\n```\n\n## Simple CASE (equality)\n\n```sql\nSELECT Name,\n  CASE Pclass\n    WHEN 1 THEN 'First'\n    WHEN 2 THEN 'Second'\n    WHEN 3 THEN 'Third'\n  END AS class_name\nFROM passengers;\n```",questions:[{id:"d14q1",difficulty:"easy",points:5,hintPenalty:2,title:"Survival Status",description:"Create a **status** column: 'Survived' if Survived=1, 'Died' if Survived=0. Show Name and status.",tableUsed:"passengers",columnsNeeded:["Name","Survived"],hint:"CASE WHEN Survived = 1 THEN 'Survived' ELSE 'Died' END",solution:"SELECT Name, CASE WHEN Survived = 1 THEN 'Survived' ELSE 'Died' END AS status FROM passengers;",alternativeSolutions:["SELECT Name, CASE WHEN Survived = 1 THEN 'Survived' ELSE 'Died' END AS status FROM passengers"],expectedResult:{columns:["Name","status"],rowCount:891,preview:[["Braund, Mr. Owen Harris","Died"],["Cumings, Mrs. John Bradley","Survived"],["Heikkinen, Miss. Laina","Survived"],["Futrelle, Mrs. Jacques Heath","Survived"],["Allen, Mr. William Henry","Died"]],note:"Human-readable status instead of 0/1"},explanation:"CASE transforms numeric codes into readable labels. Much clearer than seeing 0 or 1."},{id:"d14q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Class Names",description:"Create **class_name**: 'First', 'Second', or 'Third' based on Pclass. Show Name and class_name.",tableUsed:"passengers",columnsNeeded:["Name","Pclass"],hint:"CASE Pclass WHEN 1 THEN 'First' WHEN 2 THEN 'Second' ELSE 'Third' END",solution:"SELECT Name, CASE Pclass WHEN 1 THEN 'First' WHEN 2 THEN 'Second' ELSE 'Third' END AS class_name FROM passengers;",alternativeSolutions:["SELECT Name, CASE WHEN Pclass = 1 THEN 'First' WHEN Pclass = 2 THEN 'Second' ELSE 'Third' END AS class_name FROM passengers;"],expectedResult:{columns:["Name","class_name"],rowCount:891,preview:[["Braund, Mr. Owen Harris","Third"],["Cumings, Mrs. John Bradley","First"],["Heikkinen, Miss. Laina","Third"],["Futrelle, Mrs. Jacques Heath","First"],["Allen, Mr. William Henry","Third"]],note:"Class numbers converted to readable names"},explanation:"Simple CASE compares one column to multiple values. 'First' is clearer than '1' for reports."},{id:"d14q3",difficulty:"medium",points:15,hintPenalty:5,title:"Age Groups",description:"Create **age_group**: 'Child' (Age<18), 'Adult' (18-59), 'Senior' (60+). Show Name, Age, and age_group.",tableUsed:"passengers",columnsNeeded:["Name","Age"],hint:"CASE WHEN Age < 18 THEN 'Child' WHEN Age < 60 THEN 'Adult' ELSE 'Senior' END",solution:"SELECT Name, Age, CASE WHEN Age < 18 THEN 'Child' WHEN Age < 60 THEN 'Adult' ELSE 'Senior' END AS age_group FROM passengers;",alternativeSolutions:["SELECT Name, Age, CASE WHEN Age < 18 THEN 'Child' WHEN Age >= 60 THEN 'Senior' ELSE 'Adult' END AS age_group FROM passengers;"],expectedResult:{columns:["Name","Age","age_group"],rowCount:891,preview:[["Braund, Mr. Owen Harris",22,"Adult"],["Cumings, Mrs. John Bradley",38,"Adult"],["Heikkinen, Miss. Laina",26,"Adult"],["Palsson, Master. Gosta Leonard",2,"Child"],["Fortune, Mr. Charles Alexander",64,"Senior"]],note:"Age categorized into groups"},explanation:"WHEN conditions are checked in order - first match wins. NULL ages will fall through to 'Senior' (the ELSE)."},{id:"d14q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"Fare Categories",description:"Create **fare_category**: 'Budget' (<20), 'Standard' (20-100), 'Premium' (>100). Show Name, Fare, and fare_category.",tableUsed:"passengers",columnsNeeded:["Name","Fare"],hint:"CASE WHEN Fare < 20 THEN 'Budget' WHEN Fare <= 100 THEN 'Standard' ELSE 'Premium' END",solution:"SELECT Name, Fare, CASE WHEN Fare < 20 THEN 'Budget' WHEN Fare <= 100 THEN 'Standard' ELSE 'Premium' END AS fare_category FROM passengers;",alternativeSolutions:["SELECT Name, Fare, CASE WHEN Fare < 20 THEN 'Budget' WHEN Fare > 100 THEN 'Premium' ELSE 'Standard' END AS fare_category FROM passengers;"],expectedResult:{columns:["Name","Fare","fare_category"],rowCount:891,preview:[["Braund, Mr. Owen Harris",7.25,"Budget"],["Cumings, Mrs. John Bradley",71.28,"Standard"],["Heikkinen, Miss. Laina",7.925,"Budget"],["Astor, Col. John Jacob",227.525,"Premium"],["Cardeza, Mr. Thomas Drake Martinez",512.3292,"Premium"]],note:"Fares categorized into price tiers"},explanation:"CASE creates categorical data from continuous numbers. Useful for grouping data into ranges."},{id:"d14q5",difficulty:"hard",points:25,hintPenalty:8,title:"Count by Category",description:"Count passengers in each age group (Child/Adult/Senior) in **one query**. Show children, adults, seniors.",tableUsed:"passengers",aggregateFunction:"SUM(CASE...)",hint:"SUM(CASE WHEN Age < 18 THEN 1 ELSE 0 END) AS children, etc.",solution:"SELECT SUM(CASE WHEN Age < 18 THEN 1 ELSE 0 END) AS children, SUM(CASE WHEN Age >= 18 AND Age < 60 THEN 1 ELSE 0 END) AS adults, SUM(CASE WHEN Age >= 60 THEN 1 ELSE 0 END) AS seniors FROM passengers WHERE Age IS NOT NULL;",alternativeSolutions:["SELECT SUM(CASE WHEN Age < 18 THEN 1 ELSE 0 END) AS children, SUM(CASE WHEN Age BETWEEN 18 AND 59 THEN 1 ELSE 0 END) AS adults, SUM(CASE WHEN Age >= 60 THEN 1 ELSE 0 END) AS seniors FROM passengers WHERE Age IS NOT NULL;"],expectedResult:{columns:["children","adults","seniors"],rowCount:1,preview:[[113,563,38]],fullResult:!0,note:"113 children + 563 adults + 38 seniors = 714 (excludes 177 NULL ages)"},explanation:"CASE inside SUM creates pivot-style counts. 113 children, 563 adults, 38 seniors (excluding NULL ages)."}]},{day:15,week:3,title:"Introduction to Subqueries",description:"Use queries inside other queries",concepts:["Subquery","Scalar subquery","Nested queries"],tableUsed:"passengers",tableSchema:[{column:"Name",type:"TEXT",description:"Passenger name"},{column:"Age",type:"REAL",description:"Age in years"},{column:"Fare",type:"REAL",description:"Ticket price"},{column:"Pclass",type:"INTEGER",description:"1, 2, or 3"}],lesson:"# Subqueries - Query Inside Query ðŸŽ­\n\n## Scalar Subquery\n\nA subquery that returns a single value:\n\n```sql\nSELECT * FROM passengers\nWHERE Fare > (SELECT AVG(Fare) FROM passengers);\n```\n\nThe inner query runs first, then the outer query uses that result.\n\n## Compare to Average\n\n```sql\nSELECT Name, Age,\n  (SELECT AVG(Age) FROM passengers) AS overall_avg\nFROM passengers;\n```",questions:[{id:"d15q1",difficulty:"easy",points:5,hintPenalty:2,title:"Above Average Fare",description:"Find passengers who paid **more than the average fare**. Show Name and Fare.",tableUsed:"passengers",columnsNeeded:["Name","Fare"],filterCondition:"Fare > (SELECT AVG(Fare) ...)",hint:"WHERE Fare > (SELECT AVG(Fare) FROM passengers)",solution:"SELECT Name, Fare FROM passengers WHERE Fare > (SELECT AVG(Fare) FROM passengers);",alternativeSolutions:["SELECT Name, Fare FROM passengers WHERE Fare > (SELECT AVG(Fare) FROM passengers)"],expectedResult:{columns:["Name","Fare"],rowCount:164,preview:[["Cumings, Mrs. John Bradley",71.28],["Futrelle, Mrs. Jacques Heath",53.1],["McCarthy, Mr. Timothy J",51.8625],["Fortune, Mr. Charles Alexander",263],["Sloper, Mr. William Thompson",35.5]],note:"164 passengers paid more than average (Â£32.20)"},explanation:"The subquery calculates average fare (Â£32.20), then the outer query finds passengers above that. 164 paid more than average."},{id:"d15q2",difficulty:"easy-medium",points:10,hintPenalty:3,title:"Above Average Age",description:"Find passengers **older than the average age**. Show Name and Age.",tableUsed:"passengers",columnsNeeded:["Name","Age"],filterCondition:"Age > (SELECT AVG(Age) ...)",hint:"Same pattern: WHERE Age > (SELECT AVG(Age) FROM passengers)",solution:"SELECT Name, Age FROM passengers WHERE Age > (SELECT AVG(Age) FROM passengers);",alternativeSolutions:["SELECT Name, Age FROM passengers WHERE Age > (SELECT AVG(Age) FROM passengers)"],expectedResult:{columns:["Name","Age"],rowCount:303,preview:[["Cumings, Mrs. John Bradley",38],["Futrelle, Mrs. Jacques Heath",35],["Allen, Mr. William Henry",35],["McCarthy, Mr. Timothy J",54],["Fortune, Mr. Charles Alexander",64]],note:"303 passengers were older than average (29.7 years)"},explanation:"303 passengers were older than the average age of 29.7 years."},{id:"d15q3",difficulty:"medium",points:15,hintPenalty:5,title:"Maximum Fare",description:"Find the passenger(s) who paid the **maximum fare**. Show Name and Fare.",tableUsed:"passengers",columnsNeeded:["Name","Fare"],filterCondition:"Fare = (SELECT MAX(Fare) ...)",hint:"WHERE Fare = (SELECT MAX(Fare) FROM passengers)",solution:"SELECT Name, Fare FROM passengers WHERE Fare = (SELECT MAX(Fare) FROM passengers);",alternativeSolutions:["SELECT Name, Fare FROM passengers WHERE Fare = (SELECT MAX(Fare) FROM passengers)"],expectedResult:{columns:["Name","Fare"],rowCount:3,preview:[["Ward, Miss. Anna",512.3292],["Cardeza, Mr. Thomas Drake Martinez",512.3292],["Lesurer, Mr. Gustave J",512.3292]],fullResult:!0,note:"3 passengers tied for highest fare (Â£512.33)"},explanation:"Three passengers paid the highest fare of Â£512.33 - they likely shared a luxury suite."},{id:"d15q4",difficulty:"medium-hard",points:20,hintPenalty:6,title:"First Class Above Overall Average",description:"Find **first class** passengers who paid **more than the overall average fare** (all classes). Show Name, Pclass, and Fare.",tableUsed:"passengers",columnsNeeded:["Name","Pclass","Fare"],filterCondition:"Pclass = 1 AND Fare > (SELECT AVG(Fare) ...)",hint:"WHERE Pclass = 1 AND Fare > (SELECT AVG(Fare) FROM passengers)",solution:"SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 1 AND Fare > (SELECT AVG(Fare) FROM passengers);",alternativeSolutions:["SELECT Name, Pclass, Fare FROM passengers WHERE Pclass = 1 AND Fare > (SELECT AVG(Fare) FROM passengers)"],expectedResult:{columns:["Name","Pclass","Fare"],rowCount:160,preview:[["Cumings, Mrs. John Bradley",1,71.28],["Futrelle, Mrs. Jacques Heath",1,53.1],["McCarthy, Mr. Timothy J",1,51.8625],["Fortune, Mr. Charles Alexander",1,263],["Sloper, Mr. William Thompson",1,35.5]],note:"160 of 216 first-class passengers paid above overall average"},explanation:"160 of 216 first-class passengers (74%) paid more than the overall average of Â£32."},{id:"d15q5",difficulty:"hard",points:25,hintPenalty:8,title:"Youngest Passengers",description:"Find passenger(s) who have the **minimum age** in the dataset. Show Name and Age.",tableUsed:"passengers",columnsNeeded:["Name","Age"],filterCondition:"Age = (SELECT MIN(Age) ...)",hint:"WHERE Age = (SELECT MIN(Age) FROM passengers)",solution:"SELECT Name, Age FROM passengers WHERE Age = (SELECT MIN(Age) FROM passengers);",alternativeSolutions:["SELECT Name, Age FROM passengers WHERE Age = (SELECT MIN(Age) FROM passengers)"],expectedResult:{columns:["Name","Age"],rowCount:1,preview:[["Thomas, Master. Assad Alexander",.42]],fullResult:!0,note:"Youngest passenger: 0.42 years old (~5 months)"},explanation:"The youngest passenger was an infant named Assad Alexander Thomas, just 5 months old (0.42 years)."}]}]},"undefined"!=typeof window&&(window.sqlChallenge30Days=window.sqlChallenge30Days),console.log("30-Day SQL Challenge Part 1 loaded: Days 1-15 (75 questions)");